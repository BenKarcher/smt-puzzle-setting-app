(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const i of l)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(l){const i={};return l.integrity&&(i.integrity=l.integrity),l.referrerPolicy&&(i.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?i.credentials="include":l.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(l){if(l.ep)return;l.ep=!0;const i=n(l);fetch(l.href,i)}})();const Xs=!1;var sn=Array.isArray,oo=Array.prototype.indexOf,es=Array.from,Un=Object.defineProperty,At=Object.getOwnPropertyDescriptor,er=Object.getOwnPropertyDescriptors,uo=Object.prototype,co=Array.prototype,ts=Object.getPrototypeOf,Os=Object.isExtensible;function fo(t){return t()}function Bn(t){for(var e=0;e<t.length;e++)t[e]()}function tr(){var t,e,n=new Promise((s,l)=>{t=s,e=l});return{promise:n,resolve:t,reject:e}}const Se=2,ns=4,xn=8,bt=16,Xe=32,yt=64,$n=128,Oe=256,mn=512,ge=1024,Ee=2048,et=4096,Re=8192,Be=16384,ss=32768,kn=65536,Ms=1<<17,vo=1<<18,Vt=1<<19,nr=1<<20,Zn=1<<21,rs=1<<22,ht=1<<23,Ze=Symbol("$state"),ho=Symbol("legacy props"),_o=Symbol(""),Mt=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function sr(t){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function po(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function go(t){throw new Error("https://svelte.dev/e/effect_in_teardown")}function mo(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function bo(t){throw new Error("https://svelte.dev/e/effect_orphan")}function yo(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function wo(t){throw new Error("https://svelte.dev/e/props_invalid_value")}function So(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function xo(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function $o(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function ko(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const Cn=1,Rn=2,rr=4,Co=8,Ro=16,Eo=1,To=2,Oo=4,Mo=8,zo=16,Ao=1,Go=2,_e=Symbol(),jo="http://www.w3.org/1999/xhtml";function qo(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}let Lo=!1;function lr(t){return t===this.v}function Po(t,e){return t!=t?e==e:t!==e||t!==null&&typeof t=="object"||typeof t=="function"}function ir(t){return!Po(t,this.v)}let It=!1,Vo=!1;function Io(){It=!0}let re=null;function qt(t){re=t}function wt(t,e=!1,n){re={p:re,c:null,e:null,s:t,x:null,l:It&&!e?{s:null,u:null,$:[]}:null}}function St(t){var e=re,n=e.e;if(n!==null){e.e=null;for(var s of n)Sr(s)}return re=e.p,{}}function rn(){return!It||re!==null&&re.l===null}let vt=[];function ar(){var t=vt;vt=[],Bn(t)}function ct(t){if(vt.length===0&&!Kt){var e=vt;queueMicrotask(()=>{e===vt&&ar()})}vt.push(t)}function No(){for(;vt.length>0;)ar()}const Do=new WeakMap;function or(t){var e=Z;if(e===null)return B.f|=ht,t;if((e.f&ss)===0){if((e.f&$n)===0)throw!e.parent&&t instanceof Error&&ur(t),t;e.b.error(t)}else Lt(t,e)}function Lt(t,e){for(;e!==null;){if((e.f&$n)!==0)try{e.b.error(t);return}catch(n){t=n}e=e.parent}throw t instanceof Error&&ur(t),t}function ur(t){const e=Do.get(t);e&&(Un(t,"message",{value:e.message}),Un(t,"stack",{value:e.stack}))}const hn=new Set;let se=null,pn=null,Ae=null,Hn=new Set,Ne=[],En=null,Yn=!1,Kt=!1;class He{committed=!1;current=new Map;#t=new Map;#e=new Set;#l=0;#n=0;#o=null;#a=[];#i=[];skipped_effects=new Set;process(e){Ne=[],pn=null,this.apply();var n={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const s of e)this.#s(s,n);this.#u(),this.#n>0?(this.#r(n.effects),this.#r(n.render_effects),this.#r(n.block_effects)):(pn=this,se=null,zs(n.render_effects),zs(n.effects),pn=null),Ae=null}#s(e,n){e.f^=ge;for(var s=e.first;s!==null;){var l=s.f,i=(l&(Xe|yt))!==0,o=i&&(l&ge)!==0,a=o||(l&Re)!==0||this.skipped_effects.has(s);if((s.f&$n)!==0&&s.b?.is_pending()&&(n={parent:n,effect:s,effects:[],render_effects:[],block_effects:[]}),!a&&s.fn!==null){i?s.f^=ge:(l&ns)!==0?n.effects.push(s):an(s)&&((s.f&bt)!==0&&n.block_effects.push(s),nn(s));var u=s.first;if(u!==null){s=u;continue}}var c=s.parent;for(s=s.next;s===null&&c!==null;)c===n.effect&&(this.#r(n.effects),this.#r(n.render_effects),this.#r(n.block_effects),n=n.parent),s=c.next,c=c.parent}}#r(e){for(const n of e)((n.f&Ee)!==0?this.#a:this.#i).push(n),me(n,ge)}capture(e,n){this.#t.has(e)||this.#t.set(e,n),this.current.set(e,e.v),Ae?.set(e,e.v)}activate(){se=this}deactivate(){se=null,Ae=null}flush(){if(Ne.length>0){if(this.activate(),cr(),se!==null&&se!==this)return}else this.#u();this.deactivate();for(const e of Hn)if(Hn.delete(e),e(),se!==null)break}#u(){if(this.#n===0){for(const e of this.#e)e();this.#e.clear()}this.#l===0&&this.#c()}#c(){if(hn.size>1){this.#t.clear();var e=Ae,n=!0,s={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const l of hn){if(l===this){n=!1;continue}const i=[];for(const[a,u]of this.current){if(l.current.has(a))if(n&&u!==l.current.get(a))l.current.set(a,u);else continue;i.push(a)}if(i.length===0)continue;const o=[...l.current.keys()].filter(a=>!this.current.has(a));if(o.length>0){for(const a of i)fr(a,o);if(Ne.length>0){se=l,l.apply();for(const a of Ne)l.#s(a,s);Ne=[],l.deactivate()}}}se=null,Ae=e}this.committed=!0,hn.delete(this),this.#o?.resolve()}increment(e){this.#l+=1,e&&(this.#n+=1)}decrement(e){this.#l-=1,e&&(this.#n-=1);for(const n of this.#a)me(n,Ee),pt(n);for(const n of this.#i)me(n,et),pt(n);this.#a=[],this.#i=[],this.flush()}add_callback(e){this.#e.add(e)}settled(){return(this.#o??=tr()).promise}static ensure(){if(se===null){const e=se=new He;hn.add(se),Kt||He.enqueue(()=>{se===e&&e.flush()})}return se}static enqueue(e){ct(e)}apply(){}}function Wo(t){var e=Kt;Kt=!0;try{for(var n;;){if(No(),Ne.length===0&&(se?.flush(),Ne.length===0))return En=null,n;cr()}}finally{Kt=e}}function cr(){var t=jt;Yn=!0;try{var e=0;for(js(!0);Ne.length>0;){var n=He.ensure();if(e++>1e3){var s,l;Fo()}n.process(Ne),ut.clear()}}finally{Yn=!1,js(t),En=null}}function Fo(){try{yo()}catch(t){Lt(t,En)}}let Ue=null;function zs(t){var e=t.length;if(e!==0){for(var n=0;n<e;){var s=t[n++];if((s.f&(Be|Re))===0&&an(s)&&(Ue=new Set,nn(s),s.deps===null&&s.first===null&&s.nodes_start===null&&(s.teardown===null&&s.ac===null?kr(s):s.fn=null),Ue?.size>0)){ut.clear();for(const l of Ue){if((l.f&(Be|Re))!==0)continue;const i=[l];let o=l.parent;for(;o!==null;)Ue.has(o)&&(Ue.delete(o),i.push(o)),o=o.parent;for(let a=i.length-1;a>=0;a--){const u=i[a];(u.f&(Be|Re))===0&&nn(u)}}Ue.clear()}}Ue=null}}function fr(t,e){if(t.reactions!==null)for(const n of t.reactions){const s=n.f;(s&Se)!==0?fr(n,e):(s&(rs|bt))!==0&&dr(n,e)&&(me(n,Ee),pt(n))}}function dr(t,e){if(t.deps!==null){for(const n of t.deps)if(e.includes(n)||(n.f&Se)!==0&&dr(n,e))return!0}return!1}function pt(t){for(var e=En=t;e.parent!==null;){e=e.parent;var n=e.f;if(Yn&&e===Z&&(n&bt)!==0)return;if((n&(yt|Xe))!==0){if((n&ge)===0)return;e.f^=ge}}Ne.push(e)}function Uo(t){let e=0,n=gt(0),s;return()=>{ru()&&(r(n),Nt(()=>(e===0&&(s=A(()=>t(()=>Qt(n)))),e+=1,()=>{ct(()=>{e-=1,e===0&&(s?.(),s=void 0,Qt(n))})})))}}var Bo=kn|Vt|$n;function Zo(t,e,n){new Ho(t,e,n)}class Ho{parent;#t=!1;#e;#l=null;#n;#o;#a;#i=null;#s=null;#r=null;#u=null;#c=0;#f=0;#v=!1;#d=null;#g=()=>{this.#d&&Pt(this.#d,this.#c)};#m=Uo(()=>(this.#d=gt(this.#c),()=>{this.#d=null}));constructor(e,n,s){this.#e=e,this.#n=n,this.#o=s,this.parent=Z.b,this.#t=!!this.#n.pending,this.#a=os(()=>{Z.b=this;{try{this.#i=ze(()=>s(this.#e))}catch(l){this.error(l)}this.#f>0?this.#_():this.#t=!1}},Bo)}#b(){try{this.#i=ze(()=>this.#o(this.#e))}catch(e){this.error(e)}this.#t=!1}#y(){const e=this.#n.pending;e&&(this.#s=ze(()=>e(this.#e)),He.enqueue(()=>{this.#i=this.#h(()=>(He.ensure(),ze(()=>this.#o(this.#e)))),this.#f>0?this.#_():(Gt(this.#s,()=>{this.#s=null}),this.#t=!1)}))}is_pending(){return this.#t||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!this.#n.pending}#h(e){var n=Z,s=B,l=re;De(this.#a),xe(this.#a),qt(this.#a.ctx);try{return e()}catch(i){return or(i),null}finally{De(n),xe(s),qt(l)}}#_(){const e=this.#n.pending;this.#i!==null&&(this.#u=document.createDocumentFragment(),Er(this.#i,this.#u)),this.#s===null&&(this.#s=ze(()=>e(this.#e)))}#p(e){if(!this.has_pending_snippet()){this.parent&&this.parent.#p(e);return}this.#f+=e,this.#f===0&&(this.#t=!1,this.#s&&Gt(this.#s,()=>{this.#s=null}),this.#u&&(this.#e.before(this.#u),this.#u=null))}update_pending_count(e){this.#p(e),this.#c+=e,Hn.add(this.#g)}get_effect_pending(){return this.#m(),r(this.#d)}error(e){var n=this.#n.onerror;let s=this.#n.failed;if(this.#v||!n&&!s)throw e;this.#i&&($e(this.#i),this.#i=null),this.#s&&($e(this.#s),this.#s=null),this.#r&&($e(this.#r),this.#r=null);var l=!1,i=!1;const o=()=>{if(l){qo();return}l=!0,i&&ko(),He.ensure(),this.#c=0,this.#r!==null&&Gt(this.#r,()=>{this.#r=null}),this.#t=this.has_pending_snippet(),this.#i=this.#h(()=>(this.#v=!1,ze(()=>this.#o(this.#e)))),this.#f>0?this.#_():this.#t=!1};var a=B;try{xe(null),i=!0,n?.(e,o),i=!1}catch(u){Lt(u,this.#a&&this.#a.parent)}finally{xe(a)}s&&ct(()=>{this.#r=this.#h(()=>{this.#v=!0;try{return ze(()=>{s(this.#e,()=>e,()=>o)})}catch(u){return Lt(u,this.#a.parent),null}finally{this.#v=!1}})})}}function Yo(t,e,n){const s=rn()?Tn:ot;if(e.length===0){n(t.map(s));return}var l=se,i=Z,o=Jo();Promise.all(e.map(a=>Ko(a))).then(a=>{o();try{n([...t.map(s),...a])}catch(u){(i.f&Be)===0&&Lt(u,i)}l?.deactivate(),Jn()}).catch(a=>{Lt(a,i)})}function Jo(){var t=Z,e=B,n=re,s=se;return function(){De(t),xe(e),qt(n),s?.activate()}}function Jn(){De(null),xe(null),qt(null)}function Tn(t){var e=Se|Ee,n=B!==null&&(B.f&Se)!==0?B:null;return Z===null||n!==null&&(n.f&Oe)!==0?e|=Oe:Z.f|=Vt,{ctx:re,deps:null,effects:null,equals:lr,f:e,fn:t,reactions:null,rv:0,v:_e,wv:0,parent:n??Z,ac:null}}function Ko(t,e){let n=Z;n===null&&po();var s=n.b,l=void 0,i=gt(_e),o=!B,a=new Map;return ou(()=>{var u=tr();l=u.promise;try{Promise.resolve(t()).then(u.resolve,u.reject).then(()=>{c===se&&c.committed&&c.deactivate(),Jn()})}catch(v){u.reject(v),Jn()}var c=se;if(o){var f=!s.is_pending();s.update_pending_count(1),c.increment(f),a.get(c)?.reject(Mt),a.delete(c),a.set(c,u)}const d=(v,b=void 0)=>{if(c.activate(),b)b!==Mt&&(i.f|=ht,Pt(i,b));else{(i.f&ht)!==0&&(i.f^=ht),Pt(i,v);for(const[_,$]of a){if(a.delete(_),_===c)break;$.reject(Mt)}}o&&(s.update_pending_count(-1),c.decrement(f))};u.promise.then(d,v=>d(null,v||"unknown"))}),is(()=>{for(const u of a.values())u.reject(Mt)}),new Promise(u=>{function c(f){function d(){f===l?u(i):c(l)}f.then(d,d)}c(l)})}function ot(t){const e=Tn(t);return e.equals=ir,e}function vr(t){var e=t.effects;if(e!==null){t.effects=null;for(var n=0;n<e.length;n+=1)$e(e[n])}}function Qo(t){for(var e=t.parent;e!==null;){if((e.f&Se)===0)return e;e=e.parent}return null}function ls(t){var e,n=Z;De(Qo(t));try{vr(t),e=zr(t)}finally{De(n)}return e}function hr(t){var e=ls(t);if(t.equals(e)||(t.v=e,t.wv=Or()),!xt)if(Ae!==null)Ae.set(t,t.v);else{var n=(it||(t.f&Oe)!==0)&&t.deps!==null?et:ge;me(t,n)}}const ut=new Map;function gt(t,e){var n={f:0,v:t,reactions:null,equals:lr,rv:0,wv:0};return n}function rt(t,e){const n=gt(t);return fu(n),n}function te(t,e=!1,n=!0){const s=gt(t);return e||(s.equals=ir),It&&n&&re!==null&&re.l!==null&&(re.l.s??=[]).push(s),s}function N(t,e){return S(t,A(()=>r(t))),e}function S(t,e,n=!1){B!==null&&(!Ge||(B.f&Ms)!==0)&&rn()&&(B.f&(Se|bt|rs|Ms))!==0&&!Ye?.includes(t)&&$o();let s=n?zt(e):e;return Pt(t,s)}function Pt(t,e){if(!t.equals(e)){var n=t.v;xt?ut.set(t,e):ut.set(t,n),t.v=e;var s=He.ensure();s.capture(t,n),(t.f&Se)!==0&&((t.f&Ee)!==0&&ls(t),me(t,(t.f&Oe)===0?ge:et)),t.wv=Or(),_r(t,Ee),rn()&&Z!==null&&(Z.f&ge)!==0&&(Z.f&(Xe|yt))===0&&(Te===null?du([t]):Te.push(t))}return e}function Qt(t){S(t,t.v+1)}function _r(t,e){var n=t.reactions;if(n!==null)for(var s=rn(),l=n.length,i=0;i<l;i++){var o=n[i],a=o.f;if(!(!s&&o===Z)){var u=(a&Ee)===0;u&&me(o,e),(a&Se)!==0?_r(o,et):u&&((a&bt)!==0&&Ue!==null&&Ue.add(o),pt(o))}}}function zt(t){if(typeof t!="object"||t===null||Ze in t)return t;const e=ts(t);if(e!==uo&&e!==co)return t;var n=new Map,s=sn(t),l=rt(0),i=_t,o=a=>{if(_t===i)return a();var u=B,c=_t;xe(null),Ls(i);var f=a();return xe(u),Ls(c),f};return s&&n.set("length",rt(t.length)),new Proxy(t,{defineProperty(a,u,c){(!("value"in c)||c.configurable===!1||c.enumerable===!1||c.writable===!1)&&So();var f=n.get(u);return f===void 0?f=o(()=>{var d=rt(c.value);return n.set(u,d),d}):S(f,c.value,!0),!0},deleteProperty(a,u){var c=n.get(u);if(c===void 0){if(u in a){const f=o(()=>rt(_e));n.set(u,f),Qt(l)}}else S(c,_e),Qt(l);return!0},get(a,u,c){if(u===Ze)return t;var f=n.get(u),d=u in a;if(f===void 0&&(!d||At(a,u)?.writable)&&(f=o(()=>{var b=zt(d?a[u]:_e),_=rt(b);return _}),n.set(u,f)),f!==void 0){var v=r(f);return v===_e?void 0:v}return Reflect.get(a,u,c)},getOwnPropertyDescriptor(a,u){var c=Reflect.getOwnPropertyDescriptor(a,u);if(c&&"value"in c){var f=n.get(u);f&&(c.value=r(f))}else if(c===void 0){var d=n.get(u),v=d?.v;if(d!==void 0&&v!==_e)return{enumerable:!0,configurable:!0,value:v,writable:!0}}return c},has(a,u){if(u===Ze)return!0;var c=n.get(u),f=c!==void 0&&c.v!==_e||Reflect.has(a,u);if(c!==void 0||Z!==null&&(!f||At(a,u)?.writable)){c===void 0&&(c=o(()=>{var v=f?zt(a[u]):_e,b=rt(v);return b}),n.set(u,c));var d=r(c);if(d===_e)return!1}return f},set(a,u,c,f){var d=n.get(u),v=u in a;if(s&&u==="length")for(var b=c;b<d.v;b+=1){var _=n.get(b+"");_!==void 0?S(_,_e):b in a&&(_=o(()=>rt(_e)),n.set(b+"",_))}if(d===void 0)(!v||At(a,u)?.writable)&&(d=o(()=>rt(void 0)),S(d,zt(c)),n.set(u,d));else{v=d.v!==_e;var $=o(()=>zt(c));S(d,$)}var j=Reflect.getOwnPropertyDescriptor(a,u);if(j?.set&&j.set.call(f,c),!v){if(s&&typeof u=="string"){var E=n.get("length"),C=Number(u);Number.isInteger(C)&&C>=E.v&&S(E,C+1)}Qt(l)}return!0},ownKeys(a){r(l);var u=Reflect.ownKeys(a).filter(d=>{var v=n.get(d);return v===void 0||v.v!==_e});for(var[c,f]of n)f.v!==_e&&!(c in a)&&u.push(c);return u},setPrototypeOf(){xo()}})}function As(t){try{if(t!==null&&typeof t=="object"&&Ze in t)return t[Ze]}catch{}return t}function Xo(t,e){return Object.is(As(t),As(e))}var Kn,pr,gr,mr;function eu(){if(Kn===void 0){Kn=window,pr=/Firefox/.test(navigator.userAgent);var t=Element.prototype,e=Node.prototype,n=Text.prototype;gr=At(e,"firstChild").get,mr=At(e,"nextSibling").get,Os(t)&&(t.__click=void 0,t.__className=void 0,t.__attributes=null,t.__style=void 0,t.__e=void 0),Os(n)&&(n.__t=void 0)}}function mt(t=""){return document.createTextNode(t)}function bn(t){return gr.call(t)}function ln(t){return mr.call(t)}function w(t,e){return bn(t)}function pe(t,e=!1){{var n=bn(t);return n instanceof Comment&&n.data===""?ln(n):n}}function x(t,e=1,n=!1){let s=t;for(;e--;)s=ln(s);return s}function tu(t){t.textContent=""}function br(){return!1}let Gs=!1;function nu(){Gs||(Gs=!0,document.addEventListener("reset",t=>{Promise.resolve().then(()=>{if(!t.defaultPrevented)for(const e of t.target.elements)e.__on_r?.()})},{capture:!0}))}function On(t){var e=B,n=Z;xe(null),De(null);try{return t()}finally{xe(e),De(n)}}function yr(t,e,n,s=n){t.addEventListener(e,()=>On(n));const l=t.__on_r;l?t.__on_r=()=>{l(),s(!0)}:t.__on_r=()=>s(!0),nu()}function wr(t){Z===null&&B===null&&bo(),B!==null&&(B.f&Oe)!==0&&Z===null&&mo(),xt&&go()}function su(t,e){var n=e.last;n===null?e.last=e.first=t:(n.next=t,t.prev=n,e.last=t)}function We(t,e,n,s=!0){var l=Z;l!==null&&(l.f&Re)!==0&&(t|=Re);var i={ctx:re,deps:null,nodes_start:null,nodes_end:null,f:t|Ee,first:null,fn:e,last:null,next:null,parent:l,b:l&&l.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(n)try{nn(i),i.f|=ss}catch(u){throw $e(i),u}else e!==null&&pt(i);if(s){var o=i;if(n&&o.deps===null&&o.teardown===null&&o.nodes_start===null&&o.first===o.last&&(o.f&Vt)===0&&(o=o.first),o!==null&&(o.parent=l,l!==null&&su(o,l),B!==null&&(B.f&Se)!==0&&(t&yt)===0)){var a=B;(a.effects??=[]).push(o)}}return i}function ru(){return B!==null&&!Ge}function is(t){const e=We(xn,null,!1);return me(e,ge),e.teardown=t,e}function Qn(t){wr();var e=Z.f,n=!B&&(e&Xe)!==0&&(e&ss)===0;if(n){var s=re;(s.e??=[]).push(t)}else return Sr(t)}function Sr(t){return We(ns|nr,t,!1)}function lu(t){return wr(),We(xn|nr,t,!0)}function iu(t){He.ensure();const e=We(yt|Vt,t,!0);return(n={})=>new Promise(s=>{n.outro?Gt(e,()=>{$e(e),s(void 0)}):($e(e),s(void 0))})}function au(t){return We(ns,t,!1)}function en(t,e){var n=re,s={effect:null,ran:!1,deps:t};n.l.$.push(s),s.effect=Nt(()=>{t(),!s.ran&&(s.ran=!0,A(e))})}function as(){var t=re;Nt(()=>{for(var e of t.l.$){e.deps();var n=e.effect;(n.f&ge)!==0&&me(n,et),an(n)&&nn(n),e.ran=!1}})}function ou(t){return We(rs|Vt,t,!0)}function Nt(t,e=0){return We(xn|e,t,!0)}function Q(t,e=[],n=[]){Yo(e,n,s=>{We(xn,()=>t(...s.map(r)),!0)})}function os(t,e=0){var n=We(bt|e,t,!0);return n}function ze(t,e=!0){return We(Xe|Vt,t,!0,e)}function xr(t){var e=t.teardown;if(e!==null){const n=xt,s=B;qs(!0),xe(null);try{e.call(null)}finally{qs(n),xe(s)}}}function $r(t,e=!1){var n=t.first;for(t.first=t.last=null;n!==null;){const l=n.ac;l!==null&&On(()=>{l.abort(Mt)});var s=n.next;(n.f&yt)!==0?n.parent=null:$e(n,e),n=s}}function uu(t){for(var e=t.first;e!==null;){var n=e.next;(e.f&Xe)===0&&$e(e),e=n}}function $e(t,e=!0){var n=!1;(e||(t.f&vo)!==0)&&t.nodes_start!==null&&t.nodes_end!==null&&(cu(t.nodes_start,t.nodes_end),n=!0),$r(t,e&&!n),yn(t,0),me(t,Be);var s=t.transitions;if(s!==null)for(const i of s)i.stop();xr(t);var l=t.parent;l!==null&&l.first!==null&&kr(t),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes_start=t.nodes_end=t.ac=null}function cu(t,e){for(;t!==null;){var n=t===e?null:ln(t);t.remove(),t=n}}function kr(t){var e=t.parent,n=t.prev,s=t.next;n!==null&&(n.next=s),s!==null&&(s.prev=n),e!==null&&(e.first===t&&(e.first=s),e.last===t&&(e.last=n))}function Gt(t,e,n=!0){var s=[];us(t,s,!0),Cr(s,()=>{n&&$e(t),e&&e()})}function Cr(t,e){var n=t.length;if(n>0){var s=()=>--n||e();for(var l of t)l.out(s)}else e()}function us(t,e,n){if((t.f&Re)===0){if(t.f^=Re,t.transitions!==null)for(const o of t.transitions)(o.is_global||n)&&e.push(o);for(var s=t.first;s!==null;){var l=s.next,i=(s.f&kn)!==0||(s.f&Xe)!==0;us(s,e,i?n:!1),s=l}}}function cs(t){Rr(t,!0)}function Rr(t,e){if((t.f&Re)!==0){t.f^=Re,(t.f&ge)===0&&(me(t,Ee),pt(t));for(var n=t.first;n!==null;){var s=n.next,l=(n.f&kn)!==0||(n.f&Xe)!==0;Rr(n,l?e:!1),n=s}if(t.transitions!==null)for(const i of t.transitions)(i.is_global||e)&&i.in()}}function Er(t,e){for(var n=t.nodes_start,s=t.nodes_end;n!==null;){var l=n===s?null:ln(n);e.append(n),n=l}}let jt=!1;function js(t){jt=t}let xt=!1;function qs(t){xt=t}let B=null,Ge=!1;function xe(t){B=t}let Z=null;function De(t){Z=t}let Ye=null;function fu(t){B!==null&&(Ye===null?Ye=[t]:Ye.push(t))}let we=null,Ce=0,Te=null;function du(t){Te=t}let Tr=1,tn=0,_t=tn;function Ls(t){_t=t}let it=!1;function Or(){return++Tr}function an(t){var e=t.f;if((e&Ee)!==0)return!0;if((e&et)!==0){var n=t.deps,s=(e&Oe)!==0;if(n!==null){var l,i,o=(e&mn)!==0,a=s&&Z!==null&&!it,u=n.length;if((o||a)&&(Z===null||(Z.f&Be)===0)){var c=t,f=c.parent;for(l=0;l<u;l++)i=n[l],(o||!i?.reactions?.includes(c))&&(i.reactions??=[]).push(c);o&&(c.f^=mn),a&&f!==null&&(f.f&Oe)===0&&(c.f^=Oe)}for(l=0;l<u;l++)if(i=n[l],an(i)&&hr(i),i.wv>t.wv)return!0}(!s||Z!==null&&!it)&&me(t,ge)}return!1}function Mr(t,e,n=!0){var s=t.reactions;if(s!==null&&!Ye?.includes(t))for(var l=0;l<s.length;l++){var i=s[l];(i.f&Se)!==0?Mr(i,e,!1):e===i&&(n?me(i,Ee):(i.f&ge)!==0&&me(i,et),pt(i))}}function zr(t){var e=we,n=Ce,s=Te,l=B,i=it,o=Ye,a=re,u=Ge,c=_t,f=t.f;we=null,Ce=0,Te=null,it=(f&Oe)!==0&&(Ge||!jt||B===null),B=(f&(Xe|yt))===0?t:null,Ye=null,qt(t.ctx),Ge=!1,_t=++tn,t.ac!==null&&(On(()=>{t.ac.abort(Mt)}),t.ac=null);try{t.f|=Zn;var d=t.fn,v=d(),b=t.deps;if(we!==null){var _;if(yn(t,Ce),b!==null&&Ce>0)for(b.length=Ce+we.length,_=0;_<we.length;_++)b[Ce+_]=we[_];else t.deps=b=we;if(!it||(f&Se)!==0&&t.reactions!==null)for(_=Ce;_<b.length;_++)(b[_].reactions??=[]).push(t)}else b!==null&&Ce<b.length&&(yn(t,Ce),b.length=Ce);if(rn()&&Te!==null&&!Ge&&b!==null&&(t.f&(Se|et|Ee))===0)for(_=0;_<Te.length;_++)Mr(Te[_],t);return l!==null&&l!==t&&(tn++,Te!==null&&(s===null?s=Te:s.push(...Te))),(t.f&ht)!==0&&(t.f^=ht),v}catch($){return or($)}finally{t.f^=Zn,we=e,Ce=n,Te=s,B=l,it=i,Ye=o,qt(a),Ge=u,_t=c}}function vu(t,e){let n=e.reactions;if(n!==null){var s=oo.call(n,t);if(s!==-1){var l=n.length-1;l===0?n=e.reactions=null:(n[s]=n[l],n.pop())}}n===null&&(e.f&Se)!==0&&(we===null||!we.includes(e))&&(me(e,et),(e.f&(Oe|mn))===0&&(e.f^=mn),vr(e),yn(e,0))}function yn(t,e){var n=t.deps;if(n!==null)for(var s=e;s<n.length;s++)vu(t,n[s])}function nn(t){var e=t.f;if((e&Be)===0){me(t,ge);var n=Z,s=jt;Z=t,jt=!0;try{(e&bt)!==0?uu(t):$r(t),xr(t);var l=zr(t);t.teardown=typeof l=="function"?l:null,t.wv=Tr;var i;Xs&&Vo&&(t.f&Ee)!==0&&t.deps}finally{jt=s,Z=n}}}async function hu(){await Promise.resolve(),Wo()}function r(t){var e=t.f,n=(e&Se)!==0;if(B!==null&&!Ge){var s=Z!==null&&(Z.f&Be)!==0;if(!s&&!Ye?.includes(t)){var l=B.deps;if((B.f&Zn)!==0)t.rv<tn&&(t.rv=tn,we===null&&l!==null&&l[Ce]===t?Ce++:we===null?we=[t]:(!it||!we.includes(t))&&we.push(t));else{(B.deps??=[]).push(t);var i=t.reactions;i===null?t.reactions=[B]:i.includes(B)||i.push(B)}}}else if(n&&t.deps===null&&t.effects===null){var o=t,a=o.parent;a!==null&&(a.f&Oe)===0&&(o.f^=Oe)}if(xt){if(ut.has(t))return ut.get(t);if(n){o=t;var u=o.v;return((o.f&ge)===0&&o.reactions!==null||Ar(o))&&(u=ls(o)),ut.set(o,u),u}}else if(n){if(o=t,Ae?.has(o))return Ae.get(o);an(o)&&hr(o)}if(Ae?.has(t))return Ae.get(t);if((t.f&ht)!==0)throw t.v;return t.v}function Ar(t){if(t.v===_e)return!0;if(t.deps===null)return!1;for(const e of t.deps)if(ut.has(e)||(e.f&Se)!==0&&Ar(e))return!0;return!1}function A(t){var e=Ge;try{return Ge=!0,t()}finally{Ge=e}}const _u=-7169;function me(t,e){t.f=t.f&_u|e}function ue(t){if(!(typeof t!="object"||!t||t instanceof EventTarget)){if(Ze in t)Xn(t);else if(!Array.isArray(t))for(let e in t){const n=t[e];typeof n=="object"&&n&&Ze in n&&Xn(n)}}}function Xn(t,e=new Set){if(typeof t=="object"&&t!==null&&!(t instanceof EventTarget)&&!e.has(t)){e.add(t),t instanceof Date&&t.getTime();for(let s in t)try{Xn(t[s],e)}catch{}const n=ts(t);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){const s=er(n);for(let l in s){const i=s[l].get;if(i)try{i.call(t)}catch{}}}}}const pu=["touchstart","touchmove"];function gu(t){return pu.includes(t)}const mu=new Set,Ps=new Set;function bu(t,e,n,s={}){function l(i){if(s.capture||Yt.call(e,i),!i.cancelBubble)return On(()=>n?.call(this,i))}return t.startsWith("pointer")||t.startsWith("touch")||t==="wheel"?ct(()=>{e.addEventListener(t,l,s)}):e.addEventListener(t,l,s),l}function ee(t,e,n,s,l){var i={capture:s,passive:l},o=bu(t,e,n,i);(e===document.body||e===window||e===document||e instanceof HTMLMediaElement)&&is(()=>{e.removeEventListener(t,o,i)})}let Vs=null;function Yt(t){var e=this,n=e.ownerDocument,s=t.type,l=t.composedPath?.()||[],i=l[0]||t.target;Vs=t;var o=0,a=Vs===t&&t.__root;if(a){var u=l.indexOf(a);if(u!==-1&&(e===document||e===window)){t.__root=e;return}var c=l.indexOf(e);if(c===-1)return;u<=c&&(o=u)}if(i=l[o]||t.target,i!==e){Un(t,"currentTarget",{configurable:!0,get(){return i||n}});var f=B,d=Z;xe(null),De(null);try{for(var v,b=[];i!==null;){var _=i.assignedSlot||i.parentNode||i.host||null;try{var $=i["__"+s];if($!=null&&(!i.disabled||t.target===i))if(sn($)){var[j,...E]=$;j.apply(i,[t,...E])}else $.call(i,t)}catch(C){v?b.push(C):v=C}if(t.cancelBubble||_===e||_===null)break;i=_}if(v){for(let C of b)queueMicrotask(()=>{throw C});throw v}}finally{t.__root=e,delete t.currentTarget,xe(f),De(d)}}}function yu(t){var e=document.createElement("template");return e.innerHTML=t.replaceAll("<!>","<!---->"),e.content}function wn(t,e){var n=Z;n.nodes_start===null&&(n.nodes_start=t,n.nodes_end=e)}function L(t,e){var n=(e&Ao)!==0,s=(e&Go)!==0,l,i=!t.startsWith("<!>");return()=>{l===void 0&&(l=yu(i?t:"<!>"+t),n||(l=bn(l)));var o=s||pr?document.importNode(l,!0):l.cloneNode(!0);if(n){var a=bn(o),u=o.lastChild;wn(a,u)}else wn(o,o);return o}}function wu(t=""){{var e=mt(t+"");return wn(e,e),e}}function je(){var t=document.createDocumentFragment(),e=document.createComment(""),n=mt();return t.append(e,n),wn(e,n),t}function M(t,e){t!==null&&t.before(e)}function J(t,e){var n=e==null?"":typeof e=="object"?e+"":e;n!==(t.__t??=t.nodeValue)&&(t.__t=n,t.nodeValue=n+"")}function Su(t,e){return xu(t,e)}const Ot=new Map;function xu(t,{target:e,anchor:n,props:s={},events:l,context:i,intro:o=!0}){eu();var a=new Set,u=d=>{for(var v=0;v<d.length;v++){var b=d[v];if(!a.has(b)){a.add(b);var _=gu(b);e.addEventListener(b,Yt,{passive:_});var $=Ot.get(b);$===void 0?(document.addEventListener(b,Yt,{passive:_}),Ot.set(b,1)):Ot.set(b,$+1)}}};u(es(mu)),Ps.add(u);var c=void 0,f=iu(()=>{var d=n??e.appendChild(mt());return Zo(d,{pending:()=>{}},v=>{if(i){wt({});var b=re;b.c=i}l&&(s.$$events=l),c=t(v,s)||{},i&&St()}),()=>{for(var v of a){e.removeEventListener(v,Yt);var b=Ot.get(v);--b===0?(document.removeEventListener(v,Yt),Ot.delete(v)):Ot.set(v,b)}Ps.delete(u),d!==n&&d.parentNode?.removeChild(d)}});return $u.set(c,f),c}let $u=new WeakMap;class ku{anchor;#t=new Map;#e=new Map;#l=new Map;#n=!0;constructor(e,n=!0){this.anchor=e,this.#n=n}#o=()=>{var e=se;if(this.#t.has(e)){var n=this.#t.get(e),s=this.#e.get(n);if(s)cs(s);else{var l=this.#l.get(n);l&&(this.#e.set(n,l.effect),this.#l.delete(n),l.fragment.lastChild.remove(),this.anchor.before(l.fragment),s=l.effect)}for(const[i,o]of this.#t){if(this.#t.delete(i),i===e)break;const a=this.#l.get(o);a&&($e(a.effect),this.#l.delete(o))}for(const[i,o]of this.#e){if(i===n)continue;const a=()=>{if(Array.from(this.#t.values()).includes(i)){var c=document.createDocumentFragment();Er(o,c),c.append(mt()),this.#l.set(i,{effect:o,fragment:c})}else $e(o);this.#e.delete(i)};this.#n||!s?Gt(o,a,!1):a()}}};ensure(e,n){var s=se,l=br();if(n&&!this.#e.has(e)&&!this.#l.has(e))if(l){var i=document.createDocumentFragment(),o=mt();i.append(o),this.#l.set(e,{effect:ze(()=>n(o)),fragment:i})}else this.#e.set(e,ze(()=>n(this.anchor)));if(this.#t.set(s,e),l){for(const[a,u]of this.#e)a===e?s.skipped_effects.delete(u):s.skipped_effects.add(u);for(const[a,u]of this.#l)a===e?s.skipped_effects.delete(u.effect):s.skipped_effects.add(u.effect);s.add_callback(this.#o)}else this.#o()}}function W(t,e,n=!1){var s=new ku(t),l=n?kn:0;function i(o,a){s.ensure(o,a)}os(()=>{var o=!1;e((a,u=!0)=>{o=!0,i(u,a)}),o||i(!1,null)},l)}function Je(t,e){return e}function Cu(t,e,n){for(var s=t.items,l=[],i=e.length,o=0;o<i;o++)us(e[o].e,l,!0);var a=i>0&&l.length===0&&n!==null;if(a){var u=n.parentNode;tu(u),u.append(n),s.clear(),Ie(t,e[0].prev,e[i-1].next)}Cr(l,()=>{for(var c=0;c<i;c++){var f=e[c];a||(s.delete(f.k),Ie(t,f.prev,f.next)),$e(f.e,!a)}})}function Ke(t,e,n,s,l,i=null){var o=t,a={flags:e,items:new Map,first:null},u=(e&rr)!==0;if(u){var c=t;o=c.appendChild(mt())}var f=null,d=!1,v=new Map,b=ot(()=>{var E=n();return sn(E)?E:E==null?[]:es(E)}),_,$;function j(){Ru($,_,a,v,o,l,e,s,n),i!==null&&(_.length===0?f?cs(f):f=ze(()=>i(o)):f!==null&&Gt(f,()=>{f=null}))}os(()=>{$??=Z,_=r(b);var E=_.length;if(!(d&&E===0)){d=E===0;var C,k,P,z;if(br()){var m=new Set,O=se;for(k=0;k<E;k+=1){P=_[k],z=s(P,k);var V=a.items.get(z)??v.get(z);V?(e&(Cn|Rn))!==0&&Gr(V,P,k,e):(C=jr(null,a,null,null,P,z,k,l,e,n,!0),v.set(z,C)),m.add(z)}for(const[U,R]of a.items)m.has(U)||O.skipped_effects.add(R.e);O.add_callback(j)}else j();r(b)}})}function Ru(t,e,n,s,l,i,o,a,u){var c=(o&Co)!==0,f=(o&(Cn|Rn))!==0,d=e.length,v=n.items,b=n.first,_=b,$,j=null,E,C=[],k=[],P,z,m,O;if(c)for(O=0;O<d;O+=1)P=e[O],z=a(P,O),m=v.get(z),m!==void 0&&(m.a?.measure(),(E??=new Set).add(m));for(O=0;O<d;O+=1){if(P=e[O],z=a(P,O),m=v.get(z),m===void 0){var V=s.get(z);if(V!==void 0){s.delete(z),v.set(z,V);var U=j?j.next:_;Ie(n,j,V),Ie(n,V,U),Ln(V,U,l),j=V}else{var R=_?_.e.nodes_start:l;j=jr(R,n,j,j===null?n.first:j.next,P,z,O,i,o,u)}v.set(z,j),C=[],k=[],_=j.next;continue}if(f&&Gr(m,P,O,o),(m.e.f&Re)!==0&&(cs(m.e),c&&(m.a?.unfix(),(E??=new Set).delete(m))),m!==_){if($!==void 0&&$.has(m)){if(C.length<k.length){var q=k[0],I;j=q.prev;var Y=C[0],F=C[C.length-1];for(I=0;I<C.length;I+=1)Ln(C[I],q,l);for(I=0;I<k.length;I+=1)$.delete(k[I]);Ie(n,Y.prev,F.next),Ie(n,j,Y),Ie(n,F,q),_=q,j=F,O-=1,C=[],k=[]}else $.delete(m),Ln(m,_,l),Ie(n,m.prev,m.next),Ie(n,m,j===null?n.first:j.next),Ie(n,j,m),j=m;continue}for(C=[],k=[];_!==null&&_.k!==z;)(_.e.f&Re)===0&&($??=new Set).add(_),k.push(_),_=_.next;if(_===null)continue;m=_}C.push(m),j=m,_=m.next}if(_!==null||$!==void 0){for(var g=$===void 0?[]:es($);_!==null;)(_.e.f&Re)===0&&g.push(_),_=_.next;var X=g.length;if(X>0){var K=(o&rr)!==0&&d===0?l:null;if(c){for(O=0;O<X;O+=1)g[O].a?.measure();for(O=0;O<X;O+=1)g[O].a?.fix()}Cu(n,g,K)}}c&&ct(()=>{if(E!==void 0)for(m of E)m.a?.apply()}),t.first=n.first&&n.first.e,t.last=j&&j.e;for(var be of s.values())$e(be.e);s.clear()}function Gr(t,e,n,s){(s&Cn)!==0&&Pt(t.v,e),(s&Rn)!==0?Pt(t.i,n):t.i=n}function jr(t,e,n,s,l,i,o,a,u,c,f){var d=(u&Cn)!==0,v=(u&Ro)===0,b=d?v?te(l,!1,!1):gt(l):l,_=(u&Rn)===0?o:gt(o),$={i:_,v:b,k:i,a:null,e:null,prev:n,next:s};try{if(t===null){var j=document.createDocumentFragment();j.append(t=mt())}return $.e=ze(()=>a(t,b,_,c),Lo),$.e.prev=n&&n.e,$.e.next=s&&s.e,n===null?f||(e.first=$):(n.next=$,n.e.next=$.e),s!==null&&(s.prev=$,s.e.prev=$.e),$}finally{}}function Ln(t,e,n){for(var s=t.next?t.next.e.nodes_start:n,l=e?e.e.nodes_start:n,i=t.e.nodes_start;i!==null&&i!==s;){var o=ln(i);l.before(i),i=o}}function Ie(t,e,n){e===null?t.first=n:(e.next=n,e.e.next=n&&n.e),n!==null&&(n.prev=e,n.e.prev=e&&e.e)}const Is=[...` 	
\r\f \v\uFEFF`];function Eu(t,e,n){var s=t==null?"":""+t;if(n){for(var l in n)if(n[l])s=s?s+" "+l:l;else if(s.length)for(var i=l.length,o=0;(o=s.indexOf(l,o))>=0;){var a=o+i;(o===0||Is.includes(s[o-1]))&&(a===s.length||Is.includes(s[a]))?s=(o===0?"":s.substring(0,o))+s.substring(a+1):o=a}}return s===""?null:s}function ce(t,e,n,s,l,i){var o=t.__className;if(o!==n||o===void 0){var a=Eu(n,s,i);a==null?t.removeAttribute("class"):t.className=a,t.__className=n}else if(i&&l!==i)for(var u in i){var c=!!i[u];(l==null||c!==!!l[u])&&t.classList.toggle(u,c)}return i}const Tu=Symbol("is custom element"),Ou=Symbol("is html");function qr(t,e){var n=Lr(t);n.checked!==(n.checked=e??void 0)&&(t.checked=e)}function gn(t,e,n,s){var l=Lr(t);l[e]!==(l[e]=n)&&(e==="loading"&&(t[_o]=n),n==null?t.removeAttribute(e):typeof n!="string"&&Mu(t).includes(e)?t[e]=n:t.setAttribute(e,n))}function Lr(t){return t.__attributes??={[Tu]:t.nodeName.includes("-"),[Ou]:t.namespaceURI===jo}}var Ns=new Map;function Mu(t){var e=t.getAttribute("is")||t.nodeName,n=Ns.get(e);if(n)return n;Ns.set(e,n=[]);for(var s,l=t,i=Element.prototype;i!==l;){s=er(l);for(var o in s)s[o].set&&n.push(o);l=ts(l)}return n}function Sn(t,e,n=e){var s=new WeakSet;yr(t,"input",async l=>{var i=l?t.defaultValue:t.value;if(i=In(t)?Nn(i):i,n(i),se!==null&&s.add(se),await hu(),i!==(i=e())){var o=t.selectionStart,a=t.selectionEnd,u=t.value.length;if(t.value=i??"",a!==null){var c=t.value.length;o===a&&a===u&&c>u?(t.selectionStart=c,t.selectionEnd=c):(t.selectionStart=o,t.selectionEnd=Math.min(a,c))}}}),A(e)==null&&t.value&&(n(In(t)?Nn(t.value):t.value),se!==null&&s.add(se)),Nt(()=>{var l=e();if(t===document.activeElement){var i=pn??se;if(s.has(i))return}In(t)&&l===Nn(t.value)||t.type==="date"&&!l&&!t.value||l!==t.value&&(t.value=l??"")})}const Pn=new Set;function Vn(t,e,n,s,l=s){var i=n.getAttribute("type")==="checkbox",o=t;if(e!==null)for(var a of e)o=o[a]??=[];o.push(n),yr(n,"change",()=>{var u=n.__value;i&&(u=zu(o,u,n.checked)),l(u)},()=>l(i?[]:null)),Nt(()=>{var u=s();i?(u=u||[],n.checked=u.includes(n.__value)):n.checked=Xo(n.__value,u)}),is(()=>{var u=o.indexOf(n);u!==-1&&o.splice(u,1)}),Pn.has(o)||(Pn.add(o),ct(()=>{o.sort((u,c)=>u.compareDocumentPosition(c)===4?-1:1),Pn.delete(o)})),ct(()=>{})}function zu(t,e,n){for(var s=new Set,l=0;l<t.length;l+=1)t[l].checked&&s.add(t[l].__value);return n||s.delete(e),Array.from(s)}function In(t){var e=t.type;return e==="number"||e==="range"}function Nn(t){return t===""?null:+t}function Ds(t,e){return t===e||t?.[Ze]===e}function Au(t={},e,n,s){return au(()=>{var l,i;return Nt(()=>{l=i,i=[],A(()=>{t!==n(...i)&&(e(t,...i),l&&Ds(n(...l),t)&&e(null,...l))})}),()=>{ct(()=>{i&&Ds(n(...i),t)&&e(null,...i)})}}),t}function Pr(t){return function(...e){var n=e[0];return n.stopPropagation(),t?.apply(this,e)}}function Dt(t=!1){const e=re,n=e.l.u;if(!n)return;let s=()=>ue(e.s);if(t){let l=0,i={};const o=Tn(()=>{let a=!1;const u=e.s;for(const c in u)u[c]!==i[c]&&(i[c]=u[c],a=!0);return a&&l++,l});s=()=>r(o)}n.b.length&&lu(()=>{Ws(e,s),Bn(n.b)}),Qn(()=>{const l=A(()=>n.m.map(fo));return()=>{for(const i of l)typeof i=="function"&&i()}}),n.a.length&&Qn(()=>{Ws(e,s),Bn(n.a)})}function Ws(t,e){if(t.l.s)for(const n of t.l.s)r(n);e()}function Gu(t,e){var n=t.$$events?.[e.type],s=sn(n)?n.slice():n==null?[]:[n];for(var l of s)l.call(this,e)}let _n=!1;function ju(t){var e=_n;try{return _n=!1,[t(),_n]}finally{_n=e}}function at(t,e,n,s){var l=!It||(n&To)!==0,i=(n&Mo)!==0,o=(n&zo)!==0,a=s,u=!0,c=()=>(u&&(u=!1,a=o?A(s):s),a),f;if(i){var d=Ze in t||ho in t;f=At(t,e)?.set??(d&&e in t?k=>t[e]=k:void 0)}var v,b=!1;i?[v,b]=ju(()=>t[e]):v=t[e],v===void 0&&s!==void 0&&(v=c(),f&&(l&&wo(),f(v)));var _;if(l?_=()=>{var k=t[e];return k===void 0?c():(u=!0,k)}:_=()=>{var k=t[e];return k!==void 0&&(a=void 0),k===void 0?a:k},l&&(n&Oo)===0)return _;if(f){var $=t.$$legacy;return(function(k,P){return arguments.length>0?((!l||!P||$||b)&&f(P?_():k),k):_()})}var j=!1,E=((n&Eo)!==0?Tn:ot)(()=>(j=!1,_()));i&&r(E);var C=Z;return(function(k,P){if(arguments.length>0){const z=P?r(E):l&&i?zt(k):k;return S(E,z),j=!0,a!==void 0&&(a=z),k}return xt&&j||(C.f&Be)!==0?E.v:r(E)})}function qu(t){re===null&&sr(),It&&re.l!==null?Pu(re).m.push(t):Qn(()=>{const e=A(t);if(typeof e=="function")return e})}function Lu(t,e,{bubbles:n=!1,cancelable:s=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:s})}function on(){const t=re;return t===null&&sr(),(e,n,s)=>{const l=t.s.$$events?.[e];if(l){const i=sn(l)?l.slice():[l],o=Lu(e,n,s);for(const a of i)a.call(t.x,o);return!o.defaultPrevented}return!0}}function Pu(t){var e=t.l;return e.u??={a:[],b:[],m:[]}}const Vu="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(Vu);Io();const Fs=encodeURIComponent("4.4.4");let lt={workerURL:new URL("/smt-puzzle-setting-app/assets/minizinc-worker-3ThYB_ip.js?version=${t}",import.meta.url),numWorkers:2};const Xt=[];let Dn;function Jt(){if(!Dn){const e=`importScripts(${JSON.stringify(lt.workerURL)});`;Dn=URL.createObjectURL(new Blob([e],{type:"text/javascript"}))}const t=new Worker(Dn);t.postMessage({wasmURL:lt.wasmURL?lt.wasmURL.toString():new URL(`./minizinc.wasm?version=${Fs}`,lt.workerURL).toString(),dataURL:lt.dataURL?lt.dataURL.toString():new URL(`./minizinc.data?version=${Fs}`,lt.workerURL).toString()}),Xt.push({worker:t,runCount:0})}function Iu(){for(;Xt.length<lt.numWorkers;)Jt()}class fs{constructor(){this.vfs={},this._toRun=[],this.unnamedCount=0}clone(){const e=new fs;return e.vfs={...this.vfs},e._toRun=[...this.toRun],e.unnamedCount=this.unnamedCount,e}addString(e){let n=`_mzn_${this.unnamedCount++}.mzn`;for(;n in this.vfs;)n=`_mzn_${this.unnamedCount++}.mzn`;return this.addFile(n,e),n}addDznString(e){let n=`_dzn_${this.unnamedCount++}.dzn`;for(;n in this.vfs;)n=`_dzn_${this.unnamedCount++}.dzn`;return this.addFile(n,e),n}addJson(e){let n=`_json_${this.unnamedCount++}.json`;for(;n in this.vfs;)n=`_json_${this.unnamedCount++}.json`;return this.addFile(n,JSON.stringify(e)),n}addFile(e,n,s=!0){if(typeof n!="string"){if(e in this.vfs)return void this._addToRun(e,s);throw new Error("Missing file contents argument")}this.vfs[e]=n,this._addToRun(e,s)}_addToRun(e,n){n&&(e.endsWith(".mzn")||e.endsWith(".mzc")||e.endsWith(".dzn")||e.endsWith(".json")||e.endsWith(".mpc")||e.endsWith(".fzn"))&&this._toRun.indexOf(e)===-1&&this._toRun.push(e)}_run(e,n,s=null){Iu();const l=[];let i=this.vfs;if(n){let u=`_mzn_${this.unnamedCount++}.mpc`;for(;u in this.vfs;)u=`_mzn_${this.unnamedCount++}.mpc`;i={...this.vfs,[u]:JSON.stringify(n)},l.push(u)}let{worker:o,runCount:a}=Xt.pop();return o.postMessage({jsonStream:!0,files:i,args:[...l,...e,...this._toRun],outputFiles:s}),{worker:o,runCount:a+1}}check(e){return new Promise(((n,s)=>{const l={...e},{worker:i,runCount:o}=this._run(["--model-check-only"],l.options),a=[];i.onmessage=u=>{switch(u.data.type){case"error":a.push(u.data);break;case"exit":o<10?Xt.push({worker:i,runCount:o}):(i.terminate(),Jt()),n(a)}}}))}interface(e){return new Promise(((n,s)=>{const l={...e},{worker:i,runCount:o}=this._run(["--model-interface-only"],l.options),a=[];let u=null;i.onmessage=c=>{switch(c.data.type){case"error":a.push(c.data);break;case"interface":u=c.data;break;case"exit":o<10?Xt.push({worker:i,runCount:o}):(i.terminate(),Jt()),c.data.code===0?n(u):s(a)}}}))}compile(e){const n={...e};let s=0,l=`_fzn_${s++}.fzn`;for(;l in this.vfs;)l=`_fzn_${s++}.fzn`;const i=["-c","--fzn",l],{worker:o}=this._run(i,n.options,[l]);Jt();let a={},u=!1,c=null;return o.onmessage=f=>{if(a[f.data.type])for(const d of a[f.data.type])d(f.data);switch(f.data.type){case"exit":o.terminate(),u=!0,a={};break;case"error":c||(c=f.data)}},{isRunning:()=>!u,cancel(){if(!u){if(u=!0,o.terminate(),a.exit)for(const f of a.exit)f({type:"exit",code:null});a={}}},on(f,d){a[f]?a[f].add(d):a[f]=new Set([d])},off(f,d){a[f]&&a[f].delete(d)},then(f,d){const v=b=>{if(b.code===0)f(b.outputFiles[l]);else{const _=c?{message:c.message,...b}:b;if(!d)throw _;d(_)}};a.exit?a.exit.add(v):a.exit=new Set([v])}}}solve(e){const n={jsonOutput:!0,...e},s=["-i"];n.jsonOutput&&(s.push("--output-mode"),s.push("json"));const{worker:l}=this._run(s,n.options);Jt();let i=null,o={},a=!1,u=null,c={},f="UNKNOWN";return l.onmessage=d=>{if(o[d.data.type])for(const v of o[d.data.type])v(d.data);switch(d.data.type){case"exit":l.terminate(),a=!0,o={};break;case"error":i||(i=d.data);break;case"statistics":c={...c,...d.data.statistics};break;case"solution":u=d.data,f="SATISFIED";break;case"status":f=d.data.status}},{isRunning:()=>!a,cancel(){if(!a){if(a=!0,l.terminate(),o.exit)for(const d of o.exit)d({type:"exit",code:null});o={}}},on(d,v){o[d]?o[d].add(v):o[d]=new Set([v])},off(d,v){o[d]&&o[d].delete(v)},then(d,v){const b=_=>{if(_.code===0)d({status:f,solution:u,statistics:c});else{const $=i?{message:i.message,..._}:_;if(!v)throw $;v($)}};o.exit?o.exit.add(b):o.exit=new Set([b])}}}}class Nu{constructor(){this.initialized=!1}async init(){return this.initialized=!0,this}async solve(e,n={},s=null,l=null){const i=new fs;i.addFile("puzzle.mzn",e);const o={solver:n.solver||"chuffed","all-solutions":n.allSolutions||!1,"num-solutions":n.numSolutions||1,...n.extra};try{const a=i.solve({options:o});s&&a.on("solution",c=>{s(c)}),l&&a.on("trace",c=>{l(c)});const u=await a;return{status:u.status,time:u.time,solutions:u.solution?[u.solution]:[]}}catch(a){return console.error("MiniZinc solve error:",a),{status:"ERROR",error:a.message,solutions:[]}}}async hasSolution(e){const n=await this.solve(e,{numSolutions:1});return n.status==="SATISFIED"||n.status==="ALL_SOLUTIONS"}async countSolutions(e,n=10){const s=[];return await this.solve(e,{allSolutions:!0,numSolutions:n},l=>{s.push(l)}),s.length}}const Wn=new Nu;class Du{constructor(){this.reset()}reset(){this.grid=null,this.variables=[],this.globalRules=[],this.localRules=[],this.clues=[]}setGrid(e){return this.grid=e,this}setVariables(e,n={}){return this.variables=e.map(s=>({type:s,config:n[s]||{}})),this}addGlobalRule(e){return this.globalRules.push(e),this}addLocalRule(e,n){return this.localRules.push({rule:e,placement:n}),this}addConstraintInstance(e,n){return this.localRules.push({rule:e,groups:n}),this}addClue(e,n,s,l){return this.clues.push({row:e,col:n,variableType:s,value:l}),this}compile(){if(!this.grid)throw new Error("Grid configuration not set");const e=[];e.push("% Auto-generated MiniZinc model for puzzle"),e.push(`% Generated by SMT Puzzle Setter
`),e.push("% Import standard library functions"),e.push(`include "alldifferent.mzn";
`);const{rows:n,cols:s}=this.getGridDimensions();if(e.push(`int: rows = ${n};`),e.push(`int: cols = ${s};`),e.push("set of int: ROWS = 1..rows;"),e.push(`set of int: COLS = 1..cols;
`),this.grid.regions){e.push("% Region definitions"),e.push(`int: num_regions = ${this.grid.regions.length};`),e.push("set of int: REGIONS = 1..num_regions;"),e.push("array[ROWS, COLS] of int: region = array2d(ROWS, COLS, [");const a=Array(n).fill(null).map(()=>Array(s).fill(0));for(let c=0;c<this.grid.regions.length;c++)for(const[f,d]of this.grid.regions[c])a[f][d]=c+1;const u=[];for(let c=0;c<n;c++)for(let f=0;f<s;f++)u.push(a[c][f]);e.push(`  ${u.join(", ")}`),e.push(`]);
`)}e.push("% Variable declarations");for(const a of this.variables)e.push(this.compileVariableDeclaration(a,n,s));if(e.push(""),this.clues.length>0){e.push("% Clue constraints");for(const a of this.clues)e.push(this.compileClue(a));e.push("")}const l=[...this.globalRules.map(a=>({ruleId:a.id,groups:[]})),...this.localRules.filter(a=>a.groups).map(a=>({ruleId:a.rule.id,groups:a.groups}))];let i=null;if(this.grid.regions){i=Array(n).fill(null).map(()=>Array(s).fill(0));for(let a=0;a<this.grid.regions.length;a++)for(const[u,c]of this.grid.regions[a])i[u][c]=a+1}const o={rows:n,cols:s,regions:i};if(this.globalRules.length>0){e.push("% Global rule constraints");for(const a of this.globalRules){if(e.push(`% Rule: ${a.name}`),a.generateConstraint){const u=a.generateConstraint([],l,o);u&&u.trim()&&e.push(u)}else a.constraint&&e.push(this.interpolateConstraint(a.constraint,{rows:n,cols:s}));e.push("")}}if(this.localRules.length>0){e.push("% Local rule constraints");for(const a of this.localRules)if(a.groups){e.push(`% Rule: ${a.rule.name}`);const u=this.compileConstraintInstance(a.rule,a.groups,l,o);e.push(u),e.push("")}else a.placement&&(e.push(`% Rule: ${a.rule.name} at cells ${JSON.stringify(a.placement.cells)}`),e.push(this.interpolateConstraint(a.rule.constraint,{rows:n,cols:s,cells:a.placement.cells,...a.placement.data})),e.push(""))}return e.push(`solve satisfy;
`),e.push("% Output formatting"),e.push(this.compileOutput()),e.join(`
`)}getGridDimensions(){if(this.grid.rows&&this.grid.cols)return{rows:this.grid.rows,cols:this.grid.cols};if(this.grid.type==="rectangular")return{rows:this.grid.rows,cols:this.grid.cols};if(this.grid.type==="preset")return{sudoku:{rows:9,cols:9},"sudoku-6x6":{rows:6,cols:6}}[this.grid.preset]||{rows:9,cols:9};throw new Error("Unknown grid type: "+JSON.stringify(this.grid))}compileVariableDeclaration(e,n,s){const{type:l,config:i}=e;switch(l){case"numbers-all":const o=i.min||1,a=i.max||9;return`array[ROWS, COLS] of var ${o}..${a}: numbers;`;case"numbers-some":return i.min,`array[ROWS, COLS] of var 0..${i.max||9}: numbers; % 0 = empty`;case"shading":return"array[ROWS, COLS] of var bool: shaded;";case"lines-center":return"array[ROWS, COLS] of var 0..4: connections; % number of line segments through center";case"lines-edge":return["array[1..rows, 1..cols+1] of var bool: vedges; % vertical edges","array[1..rows+1, 1..cols] of var bool: hedges; % horizontal edges"].join(`
`);default:throw new Error(`Unknown variable type: ${l}`)}}compileClue(e){const{row:n,col:s,variableType:l,value:i}=e,o=n+1,a=s+1;return l==="numbers-all"||l==="numbers-some"?`constraint numbers[${o}, ${a}] = ${i};`:l==="shading"?`constraint shaded[${o}, ${a}] = ${i};`:`% Unknown clue type: ${l}`}interpolateConstraint(e,n){let s=e;for(const[l,i]of Object.entries(n)){const o=new RegExp(`\\$\\{${l}\\}`,"g");s=s.replace(o,JSON.stringify(i))}return s}compileOutput(){const e=[];for(const n of this.variables){const{type:s}=n;s==="numbers-all"||s==="numbers-some"?e.push('"numbers:\\n" ++ show2d(numbers)'):s==="shading"&&e.push('"shading:\\n" ++ show2d(shaded)')}return e.length===0&&e.push('"solved"'),`output [${e.join(' ++ "\\n\\n" ++ ')}];`}compileConstraintInstance(e,n,s,l){const i=[];if(e.constraintTemplate){let o=e.constraintTemplate;n.forEach((a,u)=>{const c=u+1,f=a.cells.map(([b,_])=>b+1),d=a.cells.map(([b,_])=>_+1),v=a.cells.length;o=o.replace(new RegExp(`\\$rows${c}`,"g"),`[${f.join(", ")}]`),o=o.replace(new RegExp(`\\$cols${c}`,"g"),`[${d.join(", ")}]`),o=o.replace(new RegExp(`\\$num_cells${c}`,"g"),v.toString()),a.value!==void 0&&(o=o.replace(new RegExp(`\\$value${c}`,"g"),a.value.toString()))}),i.push(o)}if(e.generateConstraint){const o=e.generateConstraint(n,s,l);o&&o.trim()&&i.push(o)}return i.join(`
`)}}class Vr{constructor(){this.compiler=new Du,this.currentModel=null}configure(e,n,s){return this.compiler.reset(),this.compiler.setGrid(e),this.compiler.setVariables(n,s),this}addGlobalRule(e){return this.compiler.addGlobalRule(e),this}addLocalRule(e,n){return this.compiler.addLocalRule(e,n),this}addConstraintInstance(e,n){return this.compiler.addConstraintInstance(e,n),this}addClue(e,n,s,l){return this.compiler.addClue(e,n,s,l),this}getCompiledModel(){return this.compiler.compile()}async solve(e={}){this.currentModel=this.compiler.compile(),console.log(`Compiled MiniZinc model:
`,this.currentModel);const n=[];return{...await Wn.solve(this.currentModel,{solver:e.solver||"chuffed",allSolutions:e.allSolutions||!1,numSolutions:e.numSolutions||1},l=>{console.log("Solution found:",l),n.push(l)}),solutions:n,modelCode:this.currentModel}}async hasUniqueSolution(){return this.currentModel=this.compiler.compile(),await Wn.countSolutions(this.currentModel,2)===1}async validate(){return this.currentModel=this.compiler.compile(),await Wn.hasSolution(this.currentModel)}}var Wu=L('<div class="status solving svelte-fpo663">Solving puzzle with MiniZinc WASM...</div>'),Fu=L('<div class="status success svelte-fpo663">✓ MiniZinc integration working! <details class="svelte-fpo663"><summary class="svelte-fpo663">View result</summary> <pre class="svelte-fpo663"> </pre></details></div>'),Uu=L('<div class="status warning svelte-fpo663">No solution found (check model)</div>'),Bu=L('<div class="status error svelte-fpo663"> </div>'),Zu=L('<details class="svelte-fpo663"><summary class="svelte-fpo663">View generated MiniZinc model</summary> <pre class="code svelte-fpo663"> </pre></details>'),Hu=L('<div class="test-panel svelte-fpo663"><h2 class="svelte-fpo663">MiniZinc Integration Test</h2> <p>This test creates a simple 3x3 Latin square puzzle with one clue.</p> <button class="svelte-fpo663"> </button> <!> <!></div>');function Yu(t,e){wt(e,!1);let n=te("idle"),s=te(null),l=te(null);async function i(){S(n,"solving"),S(l,null),S(s,null);try{const _=new Vr;_.configure({type:"rectangular",rows:3,cols:3},["numbers-all"],{"numbers-all":{min:1,max:3}}),_.addGlobalRule({name:"All different in rows",constraint:`constraint forall(r in ROWS) (
          alldifferent([numbers[r, c] | c in COLS])
        );`}),_.addClue(0,0,"numbers-all",1),console.log("Testing MiniZinc integration...");const $=await _.solve({numSolutions:1});S(s,$),S(n,$.status==="SATISFIED"?"success":"no-solution")}catch(_){S(l,_.message),S(n,"error"),console.error("Test failed:",_)}}Dt();var o=Hu(),a=x(w(o),4),u=w(a),c=x(a,2);{var f=_=>{var $=Wu();M(_,$)},d=_=>{var $=je(),j=pe($);{var E=k=>{var P=Fu(),z=x(w(P)),m=x(w(z),2),O=w(m);Q(V=>J(O,V),[()=>JSON.stringify(r(s),null,2)]),M(k,P)},C=k=>{var P=je(),z=pe(P);{var m=V=>{var U=Uu();M(V,U)},O=V=>{var U=je(),R=pe(U);{var q=I=>{var Y=Bu(),F=w(Y);Q(()=>J(F,`Error: ${r(l)??""}`)),M(I,Y)};W(R,I=>{r(n)==="error"&&I(q)},!0)}M(V,U)};W(z,V=>{r(n)==="no-solution"?V(m):V(O,!1)},!0)}M(k,P)};W(j,k=>{r(n)==="success"?k(E):k(C,!1)},!0)}M(_,$)};W(c,_=>{r(n)==="solving"?_(f):_(d,!1)})}var v=x(c,2);{var b=_=>{var $=Zu(),j=x(w($),2),E=w(j);Q(()=>J(E,r(s).modelCode)),M(_,$)};W(v,_=>{r(s)&&r(s).modelCode&&_(b)})}Q(()=>{a.disabled=r(n)==="solving",J(u,r(n)==="solving"?"Solving...":"Run Test")}),ee("click",a,i),M(t,o),St()}const Us={sudoku:{name:"Sudoku (9x9)",description:"Standard 9x9 Sudoku grid with 3x3 boxes",rows:9,cols:9,regions:Fn(9,9,3,3),defaultVariables:["numbers-all"],defaultVariableConfig:{"numbers-all":{min:1,max:9}},defaultRules:["sudoku-standard"]},"sudoku-6x6":{name:"Sudoku (6x6)",description:"6x6 Sudoku grid with 2x3 boxes",rows:6,cols:6,regions:Fn(6,6,2,3),defaultVariables:["numbers-all"],defaultVariableConfig:{"numbers-all":{min:1,max:6}},defaultRules:["sudoku-standard"]},"sudoku-4x4":{name:"Sudoku (4x4)",description:"4x4 Sudoku grid with 2x2 boxes",rows:4,cols:4,regions:Fn(4,4,2,2),defaultVariables:["numbers-all"],defaultVariableConfig:{"numbers-all":{min:1,max:4}},defaultRules:["sudoku-standard"]},"latin-square-6x6":{name:"Latin Square (6x6)",description:"6x6 grid where each row and column contains unique numbers",rows:6,cols:6,regions:null,defaultVariables:["numbers-all"],defaultVariableConfig:{"numbers-all":{min:1,max:6}},defaultRules:["latin-square"]},"latin-square-9x9":{name:"Latin Square (9x9)",description:"9x9 grid where each row and column contains unique numbers",rows:9,cols:9,regions:null,defaultVariables:["numbers-all"],defaultVariableConfig:{"numbers-all":{min:1,max:9}},defaultRules:["latin-square"]}};function Fn(t,e,n,s){const l=[],i=t/n,o=e/s;for(let a=0;a<i;a++)for(let u=0;u<o;u++){const c=[];for(let f=0;f<n;f++)for(let d=0;d<s;d++)c.push([a*n+f,u*s+d]);l.push(c)}return l}function Ju(){return Object.keys(Us).map(t=>({id:t,...Us[t]}))}function Ku(t,e){return{type:"rectangular",rows:t,cols:e,regions:null,defaultVariables:[],defaultVariableConfig:{},defaultRules:[]}}var Qu=L('<label><input type="radio" class="svelte-1n45xzr"/> <div class="preset-content svelte-1n45xzr"><h3 class="svelte-1n45xzr"> </h3> <p class="description svelte-1n45xzr"> </p> <p class="dimensions svelte-1n45xzr"> </p></div></label>'),Xu=L('<div class="preset-grid svelte-1n45xzr"></div>'),ec=L('<div class="custom-config svelte-1n45xzr"><label class="svelte-1n45xzr">Rows: <input type="number" min="2" max="20" class="svelte-1n45xzr"/></label> <label class="svelte-1n45xzr">Columns: <input type="number" min="2" max="20" class="svelte-1n45xzr"/></label> <div class="preview svelte-1n45xzr"> </div></div>'),tc=L('<div class="grid-selector svelte-1n45xzr"><h2 class="svelte-1n45xzr">Step 1: Choose Grid Geometry</h2> <div class="mode-selector svelte-1n45xzr"><label><input type="radio" class="svelte-1n45xzr"/> Preset Grid</label> <label><input type="radio" class="svelte-1n45xzr"/> Custom Rectangular Grid</label></div> <!> <div class="actions svelte-1n45xzr"><button class="primary svelte-1n45xzr">Next: Configure Solution Space</button></div></div>');function nc(t,e){wt(e,!1);const n=[],s=[],l=on(),i=Ju();let o=te("preset"),a=te("sudoku"),u=te(9),c=te(9);function f(){if(r(o)==="preset"){const V=i.find(U=>U.id===r(a));l("gridSelected",{type:"preset",preset:r(a),config:V})}else l("gridSelected",{type:"custom",config:Ku(r(u),r(c))})}Dt();var d=tc(),v=x(w(d),2),b=w(v);let _;var $=w(b);$.value=$.__value="preset";var j=x(b,2);let E;var C=w(j);C.value=C.__value="custom";var k=x(v,2);{var P=V=>{var U=Xu();Ke(U,5,()=>i,Je,(R,q)=>{var I=Qu();let Y;var F=w(I),g,X=x(F,2),K=w(X),be=w(K),qe=x(K,2),fe=w(qe),tt=x(qe,2),de=w(tt);Q(ve=>{Y=ce(I,1,"preset-card svelte-1n45xzr",null,Y,ve),g!==(g=r(q).id)&&(F.value=(F.__value=r(q).id)??""),J(be,r(q).name),J(fe,r(q).description),J(de,`${r(q).rows??""} × ${r(q).cols??""}`)},[()=>({selected:r(a)===r(q).id})]),Vn(s,[],F,()=>(r(q).id,r(a)),ve=>S(a,ve)),M(R,I)}),M(V,U)},z=V=>{var U=ec(),R=w(U),q=x(w(R)),I=x(R,2),Y=x(w(I)),F=x(I,2),g=w(F);Q(()=>J(g,`Grid size: ${r(u)??""} × ${r(c)??""} = ${r(u)*r(c)} cells`)),Sn(q,()=>r(u),X=>S(u,X)),Sn(Y,()=>r(c),X=>S(c,X)),M(V,U)};W(k,V=>{r(o)==="preset"?V(P):V(z,!1)})}var m=x(k,2),O=w(m);Q((V,U)=>{_=ce(b,1,"svelte-1n45xzr",null,_,V),E=ce(j,1,"svelte-1n45xzr",null,E,U)},[()=>({active:r(o)==="preset"}),()=>({active:r(o)==="custom"})]),Vn(n,[],$,()=>r(o),V=>S(o,V)),Vn(n,[],C,()=>r(o),V=>S(o,V)),ee("click",O,f),M(t,d),St()}var sc=L('<label class="config-field svelte-1exbxfl"> <input class="svelte-1exbxfl"/></label>'),rc=L('<div class="variable-config svelte-1exbxfl"><h4 class="svelte-1exbxfl">Configuration:</h4> <!></div>'),lc=L('<div><label class="variable-header svelte-1exbxfl"><input type="checkbox" class="svelte-1exbxfl"/> <span class="icon svelte-1exbxfl"> </span> <div class="variable-info svelte-1exbxfl"><h3 class="svelte-1exbxfl"> </h3> <p class="svelte-1exbxfl"> </p></div></label> <!></div>'),ic=L('<li class="svelte-1exbxfl"> <!></li>'),ac=L('<div class="selection-summary svelte-1exbxfl"><h3 class="svelte-1exbxfl">Selected:</h3> <ul class="svelte-1exbxfl"></ul></div>'),oc=L(`<div class="solution-space-config svelte-1exbxfl"><h2 class="svelte-1exbxfl">Step 2: Configure Solution Space</h2> <p class="info svelte-1exbxfl">Select what types of values can be placed in or around cells.
    You can mix and match multiple types for complex puzzle variants.</p> <div class="variable-types svelte-1exbxfl"></div> <!> <div class="actions svelte-1exbxfl"><button class="svelte-1exbxfl">Back</button> <button class="primary svelte-1exbxfl">Next: Puzzle Editor</button></div></div>`);function uc(t,e){wt(e,!1);let n=at(e,"gridConfig",8);const s=on(),l=[{id:"numbers-all",name:"Numbers in all cells",description:"Every cell contains a number from a specified range",icon:"🔢",configurable:!0,configFields:[{key:"min",label:"Minimum",type:"number",default:1},{key:"max",label:"Maximum",type:"number",default:9}]},{id:"numbers-some",name:"Numbers in some cells",description:"Some cells contain numbers, others are empty (Coming soon)",icon:"1️⃣",configurable:!0,disabled:!0,configFields:[{key:"min",label:"Minimum",type:"number",default:1},{key:"max",label:"Maximum",type:"number",default:9}]},{id:"shading",name:"Cell shading",description:"Each cell is either shaded or unshaded",icon:"⬛",configurable:!1},{id:"lines-center",name:"Lines through cell centers",description:"Line segments pass through the center of cells (for loop puzzles) - Coming soon",icon:"➰",configurable:!1,disabled:!0},{id:"lines-edge",name:"Lines on cell edges",description:"Lines drawn on the edges between cells - Coming soon",icon:"├─",configurable:!1,disabled:!0}];let i=te(new Set(n().defaultVariables||[])),o=te({...n().defaultVariableConfig});function a(E){r(i).has(E)?(r(i).delete(E),S(i,r(i))):(E==="numbers-all"&&r(i).has("numbers-some")?r(i).delete("numbers-some"):E==="numbers-some"&&r(i).has("numbers-all")&&r(i).delete("numbers-all"),r(i).add(E),S(i,r(i)))}function u(){if(r(i).size===0){alert("Please select at least one variable type");return}s("configured",{variables:Array.from(r(i)),variableConfig:r(o)})}function c(){s("back")}en(()=>(r(i),r(o)),()=>{r(i).forEach(E=>{if(!r(o)[E]){const C=l.find(k=>k.id===E);C&&C.configurable&&(N(o,r(o)[E]={}),C.configFields.forEach(k=>{N(o,r(o)[E][k.key]=k.default)}))}})}),as(),Dt();var f=oc(),d=x(w(f),4);Ke(d,5,()=>l,Je,(E,C)=>{var k=lc();let P;var z=w(k),m=w(z),O=x(m,2),V=w(O),U=x(O,2),R=w(U),q=w(R),I=x(R,2),Y=w(I),F=x(z,2);{var g=X=>{var K=rc(),be=x(w(K),2);Ke(be,1,()=>(r(C),A(()=>r(C).configFields)),Je,(qe,fe)=>{var tt=sc(),de=w(tt),ve=x(de);Q(()=>{J(de,`${r(fe),A(()=>r(fe).label)??""}: `),gn(ve,"type",(r(fe),A(()=>r(fe).type))),gn(ve,"min",(r(fe),A(()=>r(fe).min))),gn(ve,"max",(r(fe),A(()=>r(fe).max)))}),Sn(ve,()=>r(o)[r(C).id][r(fe).key],Le=>N(o,r(o)[r(C).id][r(fe).key]=Le)),M(qe,tt)}),M(X,K)};W(F,X=>{r(i),r(C),A(()=>r(i).has(r(C).id)&&r(C).configurable)&&X(g)})}Q((X,K)=>{P=ce(k,1,"variable-card svelte-1exbxfl",null,P,X),qr(m,K),m.disabled=(r(C),A(()=>r(C).disabled)),J(V,(r(C),A(()=>r(C).icon))),J(q,(r(C),A(()=>r(C).name))),J(Y,(r(C),A(()=>r(C).description)))},[()=>({selected:r(i).has(r(C).id),disabled:r(C).disabled}),()=>(r(i),r(C),A(()=>r(i).has(r(C).id)))]),ee("change",m,()=>a(r(C).id)),M(E,k)});var v=x(d,2);{var b=E=>{var C=ac(),k=x(w(C),2);Ke(k,5,()=>(r(i),A(()=>Array.from(r(i)))),Je,(P,z)=>{const m=ot(()=>(r(z),A(()=>l.find(q=>q.id===r(z)))));var O=ic(),V=w(O),U=x(V);{var R=q=>{var I=wu();Q(Y=>J(I,`(${Y??""})`),[()=>(r(o),r(z),A(()=>JSON.stringify(r(o)[r(z)])))]),M(q,I)};W(U,q=>{ue(r(m)),A(()=>r(m).configurable)&&q(R)})}Q(()=>J(V,`${ue(r(m)),A(()=>r(m).icon)??""} ${ue(r(m)),A(()=>r(m).name)??""} `)),M(P,O)}),M(E,C)};W(v,E=>{r(i),A(()=>r(i).size>0)&&E(b)})}var _=x(v,2),$=w(_),j=x($,2);Q(()=>j.disabled=(r(i),A(()=>r(i).size===0))),ee("click",$,c),ee("click",j,u),M(t,f),St()}const Ir="sudoku-standard",Nr="Standard Sudoku Rules",Dr="Each row, column, and box must contain all different numbers",Wr="SMT Puzzle Team",Fr="global",Ur=["numbers-all"],Br=["sudoku","uniqueness"],Zr=!0,Hr={id:Ir,name:Nr,description:Dr,author:Wr,type:Fr,requiredVariables:Ur,categories:Br,requiresRegions:Zr},cc=Object.freeze(Object.defineProperty({__proto__:null,author:Wr,categories:Br,default:Hr,description:Dr,id:Ir,name:Nr,requiredVariables:Ur,requiresRegions:Zr,type:Fr},Symbol.toStringTag,{value:"Module"})),Yr="latin-square",Jr="Latin Square",Kr="Each row and column must contain all different numbers",Qr="SMT Puzzle Team",Xr="global",el=["numbers-all"],tl=["uniqueness"],nl={id:Yr,name:Jr,description:Kr,author:Qr,type:Xr,requiredVariables:el,categories:tl},fc=Object.freeze(Object.defineProperty({__proto__:null,author:Qr,categories:tl,default:nl,description:Kr,id:Yr,name:Jr,requiredVariables:el,type:Xr},Symbol.toStringTag,{value:"Module"})),sl="no-adjacent-shading",rl="No Adjacent Shading",ll="No two shaded cells may touch orthogonally",il="SMT Puzzle Team",al="global",ol=["shading"],ul=["shading"],cl={id:sl,name:rl,description:ll,author:il,type:al,requiredVariables:ol,categories:ul},dc=Object.freeze(Object.defineProperty({__proto__:null,author:il,categories:ul,default:cl,description:ll,id:sl,name:rl,requiredVariables:ol,type:al},Symbol.toStringTag,{value:"Module"})),fl="even-shaded",dl="Shade Exactly Even Digits",vl="A cell is shaded if and only if it contains an even number",hl="SMT Puzzle Team",_l="global",pl=["numbers-all","shading"],gl=["shading","parity"],ml={id:fl,name:dl,description:vl,author:hl,type:_l,requiredVariables:pl,categories:gl},vc=Object.freeze(Object.defineProperty({__proto__:null,author:hl,categories:gl,default:ml,description:vl,id:fl,name:dl,requiredVariables:pl,type:_l},Symbol.toStringTag,{value:"Module"})),bl="white-dot",yl="White Dot (Consecutive)",wl="Two cells connected by a white dot must differ by exactly 1",Sl="SMT Puzzle Team",xl="instantiable",$l=["numbers-all"],kl=["kropki","comparison"],Cl=1,Rl=1,El=!1,Tl={id:bl,name:yl,description:wl,author:Sl,type:xl,requiredVariables:$l,categories:kl,minGroups:Cl,maxGroups:Rl,requiresValue:El},hc=Object.freeze(Object.defineProperty({__proto__:null,author:Sl,categories:kl,default:Tl,description:wl,id:bl,maxGroups:Rl,minGroups:Cl,name:yl,requiredVariables:$l,requiresValue:El,type:xl},Symbol.toStringTag,{value:"Module"})),Ol="black-dot",Ml="Black Dot (2:1 Ratio)",zl="Two cells connected by a black dot must have a 2:1 ratio",Al="SMT Puzzle Team",Gl="instantiable",jl=["numbers-all"],ql=["kropki","comparison"],Ll=1,Pl=1,Vl=!1,Il={id:Ol,name:Ml,description:zl,author:Al,type:Gl,requiredVariables:jl,categories:ql,minGroups:Ll,maxGroups:Pl,requiresValue:Vl},_c=Object.freeze(Object.defineProperty({__proto__:null,author:Al,categories:ql,default:Il,description:zl,id:Ol,maxGroups:Pl,minGroups:Ll,name:Ml,requiredVariables:jl,requiresValue:Vl,type:Gl},Symbol.toStringTag,{value:"Module"})),Nl="killer-cage",Dl="Killer Cage",Wl="Numbers in a cage must sum to a given total and be all different",Fl="SMT Puzzle Team",Ul="instantiable",Bl=["numbers-all"],Zl=["killer","sum"],Hl=1,Yl=1,Jl=!0,Kl="Sum",Ql={id:Nl,name:Dl,description:Wl,author:Fl,type:Ul,requiredVariables:Bl,categories:Zl,minGroups:Hl,maxGroups:Yl,requiresValue:Jl,valueLabel:Kl},pc=Object.freeze(Object.defineProperty({__proto__:null,author:Fl,categories:Zl,default:Ql,description:Wl,id:Nl,maxGroups:Yl,minGroups:Hl,name:Dl,requiredVariables:Bl,requiresValue:Jl,type:Ul,valueLabel:Kl},Symbol.toStringTag,{value:"Module"})),Xl=`% Standard Sudoku Rules
% All rows must contain different numbers
constraint forall(r in ROWS) (
  alldifferent([numbers[r, c] | c in COLS])
);

% All columns must contain different numbers
constraint forall(c in COLS) (
  alldifferent([numbers[r, c] | r in ROWS])
);

% All regions must contain different numbers
constraint forall(reg in REGIONS) (
  alldifferent([numbers[r, c] | r in ROWS, c in COLS where region[r, c] = reg])
);
`,ei=`% Latin Square Rules
% All rows must contain different numbers
constraint forall(r in ROWS) (
  alldifferent([numbers[r, c] | c in COLS])
);

% All columns must contain different numbers
constraint forall(c in COLS) (
  alldifferent([numbers[r, c] | r in ROWS])
);
`,ti=`% No Adjacent Shading
% No two shaded cells may touch orthogonally
constraint forall(r in ROWS, c in COLS) (
  if r < rows then
    not (shaded[r, c] /\\ shaded[r+1, c])
  else
    true
  endif
);

constraint forall(r in ROWS, c in COLS) (
  if c < cols then
    not (shaded[r, c] /\\ shaded[r, c+1])
  else
    true
  endif
);
`,ni=`% Shade Exactly the Even Digits
% A cell is shaded if and only if it contains an even number
constraint forall(r in ROWS, c in COLS) (
  shaded[r, c] <-> (numbers[r, c] mod 2 = 0)
);
`,si=`% White Dot (Consecutive) Constraint
% The two cells must have a difference of exactly 1
constraint abs(numbers[$rows1[1], $cols1[1]] - numbers[$rows1[2], $cols1[2]]) = 1;
`,ri=`% Black Dot (2:1 Ratio) Constraint
% One cell must be exactly double the other
constraint (numbers[$rows1[1], $cols1[1]] = 2 * numbers[$rows1[2], $cols1[2]]) \\/
           (2 * numbers[$rows1[1], $cols1[1]] = numbers[$rows1[2], $cols1[2]]);
`,li=`% Killer Cage: sum to $value1 and all different
constraint sum(i in 1..$num_cells1)(numbers[$rows1[i], $cols1[i]]) = $value1;
constraint alldifferent([numbers[$rows1[i], $cols1[i]] | i in 1..$num_cells1]);
`;({...Hr},{...nl}),{...cl},{...ml},{...Tl},{...Il},{...Ql};const ii="my-global-rule-id",ai="My Global Rule Name",oi="Brief description of what this global rule does",ui="Your Name",ci="global",fi=["numbers-all"],di=["category1","category2"],gc={id:ii,name:ai,description:oi,author:ui,type:ci,requiredVariables:fi,categories:di},mc=Object.freeze(Object.defineProperty({__proto__:null,author:ui,categories:di,default:gc,description:oi,id:ii,name:ai,requiredVariables:fi,type:ci},Symbol.toStringTag,{value:"Module"})),vi="global-region-sum-lines",hi="Global Region Sum Lines",_i="This rule specifies that for each digit that occurs on a sum line, the sum of the region indexes in which that digit appears must be equal.",pi="Your Name",gi="global",mi=["numbers-all"],bi=["sudoku","global","sum"],bc={id:vi,name:hi,description:_i,author:pi,type:gi,requiredVariables:mi,categories:bi},yc=Object.freeze(Object.defineProperty({__proto__:null,author:pi,categories:bi,default:bc,description:_i,id:vi,name:hi,requiredVariables:mi,type:gi},Symbol.toStringTag,{value:"Module"})),yi="my-rule-id",wi="My Rule Name",Si="Brief description of what this rule does",xi="Your Name",$i="instantiable",ki=["numbers-all"],Ci=["category1","category2"],Ri=1,Ei=1,Ti=!1,Oi="Value",wc={id:yi,name:wi,description:Si,author:xi,type:$i,requiredVariables:ki,categories:Ci,minGroups:Ri,maxGroups:Ei,requiresValue:Ti,valueLabel:Oi},Sc=Object.freeze(Object.defineProperty({__proto__:null,author:xi,categories:Ci,default:wc,description:Si,id:yi,maxGroups:Ei,minGroups:Ri,name:wi,requiredVariables:ki,requiresValue:Ti,type:$i,valueLabel:Oi},Symbol.toStringTag,{value:"Module"})),Mi="arrow",zi="Arrow",Ai="Each arrow coming out of a pill sums to the number in the pill (read as multi-digit)",Gi="SMT Puzzle Team",ji="instantiable",qi=["numbers-all"],Li=["arithmetic","sum"],Pi=2,Vi=999,Ii=!1,xc={id:Mi,name:zi,description:Ai,author:Gi,type:ji,requiredVariables:qi,categories:Li,minGroups:Pi,maxGroups:Vi,requiresValue:Ii},$c=Object.freeze(Object.defineProperty({__proto__:null,author:Gi,categories:Li,default:xc,description:Ai,id:Mi,maxGroups:Vi,minGroups:Pi,name:zi,requiredVariables:qi,requiresValue:Ii,type:ji},Symbol.toStringTag,{value:"Module"})),Ni="german-whisper",Di="German Whisper",Wi="Adjacent digits along the line must differ by at least 5",Fi="SMT Puzzle Team",Ui="instantiable",Bi=["numbers-all"],Zi=["difference","inequality"],Hi=1,Yi=1,Ji=!1,kc={id:Ni,name:Di,description:Wi,author:Fi,type:Ui,requiredVariables:Bi,categories:Zi,minGroups:Hi,maxGroups:Yi,requiresValue:Ji},Cc=Object.freeze(Object.defineProperty({__proto__:null,author:Fi,categories:Zi,default:kc,description:Wi,id:Ni,maxGroups:Yi,minGroups:Hi,name:Di,requiredVariables:Bi,requiresValue:Ji,type:Ui},Symbol.toStringTag,{value:"Module"})),Ki="palindrome",Qi="Palindrome",Xi="Digits along the line must form a palindrome (read the same forwards and backwards)",ea="SMT Puzzle Team",ta="instantiable",na=["numbers-all"],sa=["sequence","symmetry"],ra=1,la=1,ia=!1,Rc={id:Ki,name:Qi,description:Xi,author:ea,type:ta,requiredVariables:na,categories:sa,minGroups:ra,maxGroups:la,requiresValue:ia},Ec=Object.freeze(Object.defineProperty({__proto__:null,author:ea,categories:sa,default:Rc,description:Xi,id:Ki,maxGroups:la,minGroups:ra,name:Qi,requiredVariables:na,requiresValue:ia,type:ta},Symbol.toStringTag,{value:"Module"})),aa="region-sum-line",oa="Region Sum Line",ua="Sum of digits must be equal in each region the line passes through",ca="SMT Puzzle Team",fa="instantiable",da=["numbers-all"],va=["sum","region"],ha=1,_a=1,pa=!1,Tc={id:aa,name:oa,description:ua,author:ca,type:fa,requiredVariables:da,categories:va,minGroups:ha,maxGroups:_a,requiresValue:pa},Oc=Object.freeze(Object.defineProperty({__proto__:null,author:ca,categories:va,default:Tc,description:ua,id:aa,maxGroups:_a,minGroups:ha,name:oa,requiredVariables:da,requiresValue:pa,type:fa},Symbol.toStringTag,{value:"Module"})),ga="thermometer",ma="Thermometer",ba="Digits must strictly increase as you move away from the bulb",ya="SMT Puzzle Team",wa="instantiable",Sa=["numbers-all"],xa=["ordering","inequality"],$a=1,ka=1,Ca=!1,Mc={id:ga,name:ma,description:ba,author:ya,type:wa,requiredVariables:Sa,categories:xa,minGroups:$a,maxGroups:ka,requiresValue:Ca},zc=Object.freeze(Object.defineProperty({__proto__:null,author:ya,categories:xa,default:Mc,description:ba,id:ga,maxGroups:ka,minGroups:$a,name:ma,requiredVariables:Sa,requiresValue:Ca,type:wa},Symbol.toStringTag,{value:"Module"})),Ac=`% REQUIRED for most global rules (unless using rule.js instead)
%
% This file contains the MiniZinc constraints that apply to the entire grid.
% Global rules don't use groups or substitutions like $rows1, $cols1.
%
% Available variables you can use:
%   ROWS, COLS - Sets of row/column indices (e.g., 1..9)
%   rows, cols - Grid dimensions as integers
%   numbers[ROWS, COLS] - The number grid (if requiredVariables includes numbers)
%   shaded[ROWS, COLS] - The shading grid (if requiredVariables includes shading)
%   region[ROWS, COLS] - Region assignments (if requiresRegions is true)
%   REGIONS - Set of region indices
%
% Examples:
%
% All rows must have unique numbers:
% constraint forall(r in ROWS) (
%   alldifferent([numbers[r, c] | c in COLS])
% );
%
% No two adjacent cells can both be shaded:
% constraint forall(r in ROWS, c in COLS where c < cols) (
%   not (shaded[r, c] /\\ shaded[r, c+1])
% );

% Write your global constraint here:
constraint true; % Replace with your actual constraint
`,Gc=`% REQUIRED for most global rules (unless using rule.js instead)
%
% This file contains the MiniZinc constraints that apply to the entire grid.
% Global rules don't use groups or substitutions like $rows1, $cols1.
%
% Available variables you can use:
%   ROWS, COLS - Sets of row/column indices (e.g., 1..9)
%   rows, cols - Grid dimensions as integers
%   numbers[ROWS, COLS] - The number grid (if requiredVariables includes numbers)
%   shaded[ROWS, COLS] - The shading grid (if requiredVariables includes shading)
%   region[ROWS, COLS] - Region assignments (if requiresRegions is true)
%   REGIONS - Set of region indices
%
% Examples:
%
% All rows must have unique numbers:
% constraint forall(r in ROWS) (
%   alldifferent([numbers[r, c] | c in COLS])
% );
%
% No two adjacent cells can both be shaded:
% constraint forall(r in ROWS, c in COLS where c < cols) (
%   not (shaded[r, c] /\\ shaded[r, c+1])
% );

% Write your global constraint here:
constraint true; % Replace with your actual constraint
`;function jc(t,e,n){const{cellSize:s}=n}function qc(t,e,n){const{rows:s,cols:l,regions:i}=n,o=[];for(let a=1;a<=s;a++)for(let u=1;u<=l;u++)o.push(`% Constraint for cell (${a}, ${u})`);return o.join(`
`)}function Lc(t,e,n){console.log(e);const{rows:s,cols:l,regions:i}=n,o=new Set;for(const c of e.filter(f=>f.ruleId==="region-sum-line"))for(const f of c.groups)for(const d of f.cells)o.add(d);const a=Array.from(o).map(([c,f])=>`${i[c][f]}*(numbers[${c+1},${f+1}]==n)`).join(" + "),u=[];return u.push("var int: global_region_sum_line_sum;"),u.push(`constraint forall(n in 1..${s})(let {var int: global_region_sum_line_total = (${a})} in global_region_sum_line_sum = global_region_sum_line_total \\/ global_region_sum_line_total = 0);`),u.join(`
`)}const Pc=`% OPTIONAL FILE: Delete this file if you're using rule.js for code generation instead
%
% This file contains MiniZinc constraint templates with variable substitution.
% Use this for simple constraints that don't need complex JavaScript logic.
%
% Available substitutions (automatically replaced by the compiler):
%   $rows1, $rows2, ... - Arrays of row indices for group 1, 2, etc. (1-indexed)
%   $cols1, $cols2, ... - Arrays of column indices for group 1, 2, etc. (1-indexed)
%   $value1, $value2, ... - Value for group 1, 2, etc. (if requiresValue is true)
%   $num_cells1, $num_cells2, ... - Number of cells in group 1, 2, etc.
%
% Example for a "sum to value" constraint:
% constraint sum(i in 1..$num_cells1)(numbers[$rows1[i], $cols1[i]]) = $value1;
%
% Example for a "two cells differ by 1" constraint:
% constraint abs(numbers[$rows1[1], $cols1[1]] - numbers[$rows1[2], $cols1[2]]) = 1;

% Write your constraint here:
constraint true; % Replace with your actual constraint
`,Vc=`% German Whisper: adjacent digits differ by at least 5
constraint forall(i in 1..$num_cells1-1) (
  abs(numbers[$rows1[i], $cols1[i]] - numbers[$rows1[i+1], $cols1[i+1]]) >= 5
);
`,Ic=`% Palindrome: digits read the same forwards and backwards
% First cell equals last cell, second equals second-to-last, etc.
constraint forall(i in 1..$num_cells1 div 2) (
  numbers[$rows1[i], $cols1[i]] = numbers[$rows1[$num_cells1 - i + 1], $cols1[$num_cells1 - i + 1]]
);
`,Nc=`% Thermometer: digits strictly increase along the line
% First cell is the bulb, subsequent cells must be strictly greater
constraint forall(i in 1..$num_cells1-1) (
  numbers[$rows1[i], $cols1[i]] < numbers[$rows1[i+1], $cols1[i+1]]
);
`;function Dc(t,e,n){const{cellSize:s,gridInfo:l,get_coords:i,draw_line:o,draw_cage:a,draw_pill:u,redraw_edge:c,getCellCenter:f,getCellCorner:d}=n;t.forEach(v=>{if(a(e,v.cells,{color:"#666",lineWidth:2,dash:[5,3]}),v.value!==void 0&&v.cells.length>0){const[b,_]=v.cells[0],$=i(b,_);e.fillStyle="#666",e.font="bold 12px Arial",e.textAlign="left",e.textBaseline="top",e.fillText(v.value.toString(),$.x_min+3,$.y_min+3)}})}function Wc(t,e,n){const{draw_pill:s,get_coords:l,cellSize:i}=n;if(t.length<2)return;const o=t[0];o.cells&&o.cells.length>0&&s(e,o.cells,{fillColor:"#ccc",outlineColor:"#fff"});for(let a=1;a<t.length;a++){const u=t[a];if(!(!u.cells||u.cells.length<2)&&(e.strokeStyle="#999",e.lineWidth=i*.3,e.lineCap="round",e.lineJoin="round",e.beginPath(),u.cells.forEach(([c,f],d)=>{const v=l(c,f);d===0?e.moveTo(v.x,v.y):e.lineTo(v.x,v.y)}),e.stroke(),u.cells.length>=2)){const c=u.cells.length-1,[f,d]=u.cells[c-1],[v,b]=u.cells[c],_=l(f,d),$=l(v,b),j=$.x-_.x,E=$.y-_.y,C=Math.atan2(E,j),k=i*.4,P=Math.PI/6;e.fillStyle="#999",e.beginPath(),e.moveTo($.x,$.y),e.lineTo($.x-k*Math.cos(C-P),$.y-k*Math.sin(C-P)),e.lineTo($.x-k*Math.cos(C+P),$.y-k*Math.sin(C+P)),e.closePath(),e.fill()}}}function Fc(t,e,n){const{cellSize:s}=n;t.forEach(l=>{if(!l.cells||l.cells.length!==2)return;const[i,o]=l.cells[0],[a,u]=l.cells[1],c=o*s+s/2,f=i*s+s/2,d=u*s+s/2,v=a*s+s/2,b=(c+d)/2,_=(f+v)/2;e.fillStyle="#000",e.beginPath(),e.arc(b,_,8,0,Math.PI*2),e.fill()})}function Uc(t,e,n){const{get_coords:s,cellSize:l}=n;t.forEach(i=>{!i.cells||i.cells.length===0||(e.strokeStyle="#81C784",e.lineWidth=l*.25,e.lineCap="round",e.lineJoin="round",e.beginPath(),i.cells.forEach(([o,a],u)=>{const c=s(o,a);u===0?e.moveTo(c.x,c.y):e.lineTo(c.x,c.y)}),e.stroke())})}function Bc(t,e,n){const{cellSize:s,draw_cage:l,get_coords:i}=n;t.forEach(o=>{if(!(!o.cells||o.cells.length===0)&&(l(e,o.cells,{color:"#666",lineWidth:2,dash:[5,3]}),o.value!==void 0&&o.cells.length>0)){const[a,u]=o.cells[0],c=i(a,u);e.fillStyle="#666",e.font="bold 12px Arial",e.textAlign="left",e.textBaseline="top",e.fillText(o.value.toString(),c.x_min+3,c.y_min+3)}})}function Zc(t,e,n){const{get_coords:s,cellSize:l}=n;t.forEach(i=>{!i.cells||i.cells.length===0||(e.strokeStyle="#888",e.lineWidth=l*.25,e.lineCap="round",e.lineJoin="round",e.beginPath(),i.cells.forEach(([o,a],u)=>{const c=s(o,a);u===0?e.moveTo(c.x,c.y):e.lineTo(c.x,c.y)}),e.stroke())})}function Hc(t,e,n){const{get_coords:s,cellSize:l}=n;t.forEach(i=>{!i.cells||i.cells.length===0||(e.strokeStyle="#64B5F6",e.lineWidth=l*.25,e.lineCap="round",e.lineJoin="round",e.beginPath(),i.cells.forEach(([o,a],u)=>{const c=s(o,a);u===0?e.moveTo(c.x,c.y):e.lineTo(c.x,c.y)}),e.stroke())})}function Yc(t,e,n){const{draw_pill:s,get_coords:l,cellSize:i}=n;t.forEach(o=>{if(!o.cells||o.cells.length===0)return;s(e,o.cells,{fillColor:"#bbb",outlineColor:"#fff"});const[a,u]=o.cells[0],c=l(a,u);e.fillStyle="#bbb",e.strokeStyle="#fff",e.lineWidth=i*.05,e.beginPath(),e.arc(c.x,c.y,i*.35,0,Math.PI*2),e.fill(),e.stroke()})}function Jc(t,e,n){const{cellSize:s}=n;t.forEach(l=>{if(!l.cells||l.cells.length!==2)return;const[i,o]=l.cells[0],[a,u]=l.cells[1],c=o*s+s/2,f=i*s+s/2,d=u*s+s/2,v=a*s+s/2,b=(c+d)/2,_=(f+v)/2;e.fillStyle="#fff",e.strokeStyle="#000",e.lineWidth=2,e.beginPath(),e.arc(b,_,8,0,Math.PI*2),e.fill(),e.stroke()})}function Kc(t,e,n){const{rows:s,cols:l,regions:i}=n,o=[];return t.forEach((a,u)=>{const c=u+1;a.cells.forEach(([f,d])=>{const v=f+1,b=d+1;o.push(`% Constraint for cell (${v}, ${b})`)}),a.value!==void 0&&o.push(`% Group ${c} has value: ${a.value}`)}),o.join(`
`)}function Qc(t,e,n){if(t.length<2)return"";const s=[],i=t[0].cells.map(([a,u])=>`numbers[${a+1}, ${u+1}]`);let o;i.length===1?o=i[0]:o=`(${i.map((u,c)=>{const f=i.length-c-1;return f===0?u:`${u} * ${Math.pow(10,f)}`}).join(" + ")})`;for(let a=1;a<t.length;a++){const u=t[a];if(u.cells.length===0)continue;const f=u.cells.map(([d,v])=>`numbers[${d+1}, ${v+1}]`).join(" + ");s.push(`% Arrow ${a}: sum equals pill value`),s.push(`constraint ${f} = ${o};`)}return s.join(`
`)}function Xc(t,e,n){if(console.log("Generating region-sum-line constraints"),t.length===0)return"";const s=[],{regions:l}=n;return l?(t.forEach((i,o)=>{if(!i.cells||i.cells.length===0)return;const a={};i.cells.forEach(([f,d])=>{const v=l[f][d];a[v]||(a[v]=[]),a[v].push([f,d])});const u=Object.keys(a).map(Number).sort((f,d)=>f-d);if(u.length<=1)return;s.push(`% Region sum line ${o+1}: equal sums in each region`);const c=u.map(f=>`(${a[f].map(([b,_])=>`numbers[${b+1}, ${_+1}]`).join(" + ")})`);for(let f=1;f<c.length;f++)s.push(`constraint ${c[0]} = ${c[f]};`)}),s.join(`
`)):(console.warn("Region sum line constraint requires regions to be defined in the grid"),"% Region sum line constraint skipped: no regions defined")}const ef=Object.assign({"../rules/global/_template/metadata.json":mc,"../rules/global/even-shaded/metadata.json":vc,"../rules/global/global-region-sum-lines/metadata.json":yc,"../rules/global/latin-square/metadata.json":fc,"../rules/global/no-adjacent-shading/metadata.json":dc,"../rules/global/sudoku-standard/metadata.json":cc}),tf=Object.assign({"../rules/local/_template/metadata.json":Sc,"../rules/local/arrow/metadata.json":$c,"../rules/local/black-dot/metadata.json":_c,"../rules/local/german-whisper/metadata.json":Cc,"../rules/local/killer-cage/metadata.json":pc,"../rules/local/palindrome/metadata.json":Ec,"../rules/local/region-sum-line/metadata.json":Oc,"../rules/local/thermometer/metadata.json":zc,"../rules/local/white-dot/metadata.json":hc}),Bs=Object.assign({"../rules/global/_template/constraint.mzn":Ac,"../rules/global/even-shaded/constraint.mzn":ni,"../rules/global/global-region-sum-lines/constraint.mzn":Gc,"../rules/global/latin-square/constraint.mzn":ei,"../rules/global/no-adjacent-shading/constraint.mzn":ti,"../rules/global/sudoku-standard/constraint.mzn":Xl}),Zs=Object.assign({"../rules/global/_template/render.js":jc}),Hs=Object.assign({"../rules/global/_template/rule.js":qc,"../rules/global/global-region-sum-lines/rule.js":Lc}),Ys=Object.assign({"../rules/local/_template/constraint.mzn":Pc,"../rules/local/black-dot/constraint.mzn":ri,"../rules/local/german-whisper/constraint.mzn":Vc,"../rules/local/killer-cage/constraint.mzn":li,"../rules/local/palindrome/constraint.mzn":Ic,"../rules/local/thermometer/constraint.mzn":Nc,"../rules/local/white-dot/constraint.mzn":si}),Js=Object.assign({"../rules/local/_template/render.js":Dc,"../rules/local/arrow/render.js":Wc,"../rules/local/black-dot/render.js":Fc,"../rules/local/german-whisper/render.js":Uc,"../rules/local/killer-cage/render.js":Bc,"../rules/local/palindrome/render.js":Zc,"../rules/local/region-sum-line/render.js":Hc,"../rules/local/thermometer/render.js":Yc,"../rules/local/white-dot/render.js":Jc}),Ks=Object.assign({"../rules/local/_template/rule.js":Kc,"../rules/local/arrow/rule.js":Qc,"../rules/local/region-sum-line/rule.js":Xc});function Ra(t,e,n){const s=t.replace("/metadata.json",""),l={...e.default},i=`${s}/constraint.mzn`,o=`${s}/render.js`,a=`${s}/rule.js`;return n==="global"?(Bs[i]&&(l.constraint=Bs[i]),Zs[o]&&(l.render=Zs[o]),Hs[a]&&(l.generateConstraint=Hs[a])):n==="local"&&(Ys[i]&&(l.constraintTemplate=Ys[i]),Js[o]&&(l.render=Js[o]),Ks[a]&&(l.generateConstraint=Ks[a])),l}const Ea=Object.entries(ef).filter(([t])=>!t.includes("/_template/")).map(([t,e])=>Ra(t,e,"global")),nf=Object.entries(tf).filter(([t])=>!t.includes("/_template/")).map(([t,e])=>Ra(t,e,"local")),sf=[...Ea,...nf];function Qs(t){return sf.filter(e=>e.requiredVariables?e.requiredVariables.every(n=>t.includes(n)||t.some(s=>s.startsWith(n.split("-")[0]))):!0)}function rf(){return Ea}var lf=L('<label class="rule-item svelte-4d9uex"><input type="checkbox" class="svelte-4d9uex"/> <div class="rule-info svelte-4d9uex"><strong class="svelte-4d9uex"> </strong> <p class="svelte-4d9uex"> </p></div></label>'),af=L('<p class="empty svelte-4d9uex">No compatible global rules for selected variables</p>'),of=L('<button class="constraint-card svelte-4d9uex"><strong class="svelte-4d9uex"> </strong> <p class="svelte-4d9uex"> </p> <span class="add-icon svelte-4d9uex">+ Add Instance</span></button>'),uf=L('<p class="empty svelte-4d9uex">No compatible local constraints for selected variables</p>'),cf=L('<div class="modal-backdrop svelte-4d9uex"><div class="modal svelte-4d9uex"><div class="modal-header svelte-4d9uex"><h2 class="svelte-4d9uex">Add Rules & Constraints</h2> <button class="close-btn svelte-4d9uex">×</button></div> <div class="modal-content svelte-4d9uex"><section class="svelte-4d9uex"><h3 class="svelte-4d9uex">Global Rules</h3> <p class="section-desc svelte-4d9uex">These rules apply to the entire grid</p> <div class="rule-list svelte-4d9uex"><!> <!></div></section> <section class="svelte-4d9uex"><h3 class="svelte-4d9uex">Local Constraints</h3> <p class="section-desc svelte-4d9uex">Click to add an instance of a constraint</p> <div class="rule-grid svelte-4d9uex"><!> <!></div></section></div></div></div>');function ff(t,e){wt(e,!1);const n=te(),s=te();let l=at(e,"variables",8),i=at(e,"initialGlobalRules",24,()=>[]);const o=on();let a=te([...i()]);function u(R){r(a).includes(R)?S(a,r(a).filter(q=>q!==R)):S(a,[...r(a),R]),o("updateGlobalRules",r(a))}function c(R){o("addInstance",{rule:R}),o("close")}function f(){o("close")}en(()=>ue(l()),()=>{S(n,Qs(l()).filter(R=>R.type==="global"))}),en(()=>ue(l()),()=>{S(s,Qs(l()).filter(R=>R.type==="instantiable"))}),as(),Dt();var d=cf(),v=w(d),b=w(v),_=x(w(b),2),$=x(b,2),j=w($),E=x(w(j),4),C=w(E);Ke(C,1,()=>r(n),Je,(R,q)=>{var I=lf(),Y=w(I),F=x(Y,2),g=w(F),X=w(g),K=x(g,2),be=w(K);Q(qe=>{qr(Y,qe),J(X,(r(q),A(()=>r(q).name))),J(be,(r(q),A(()=>r(q).description)))},[()=>(r(a),r(q),A(()=>r(a).includes(r(q).id)))]),ee("change",Y,()=>u(r(q).id)),M(R,I)});var k=x(C,2);{var P=R=>{var q=af();M(R,q)};W(k,R=>{r(n),A(()=>r(n).length===0)&&R(P)})}var z=x(j,2),m=x(w(z),4),O=w(m);Ke(O,1,()=>r(s),Je,(R,q)=>{var I=of(),Y=w(I),F=w(Y),g=x(Y,2),X=w(g);Q(()=>{J(F,(r(q),A(()=>r(q).name))),J(X,(r(q),A(()=>r(q).description)))}),ee("click",I,()=>c(r(q))),M(R,I)});var V=x(O,2);{var U=R=>{var q=uf();M(R,q)};W(V,R=>{r(s),A(()=>r(s).length===0)&&R(U)})}ee("click",_,f),ee("click",v,Pr(function(R){Gu.call(this,e,R)})),ee("click",d,f),M(t,d),St()}var df=L('<div class="rule-item svelte-ehgxtl"><span class="rule-name svelte-ehgxtl"> </span> <button class="delete-btn svelte-ehgxtl">×</button></div>'),vf=L('<div class="section svelte-ehgxtl"><h4 class="svelte-ehgxtl">Global Rules</h4> <!></div>'),hf=L('<span class="value svelte-ehgxtl"> </span>'),_f=L('<span class="delete-group svelte-ehgxtl">×</span>'),pf=L("<button> <!> <!></button>"),gf=L('<button class="add-group-btn svelte-ehgxtl">+ Add Group</button>'),mf=L("<!> <!>",1),bf=L('<span class="cells-preview svelte-ehgxtl"> </span>'),yf=L('<input type="number" class="svelte-ehgxtl"/>'),wf=L('<div class="group-info svelte-ehgxtl"><div class="cell-list svelte-ehgxtl"> <!></div> <!></div>'),Sf=L('<div><div class="instance-header svelte-ehgxtl"><strong class="svelte-ehgxtl"> </strong> <button class="delete-btn svelte-ehgxtl">×</button></div> <div class="groups svelte-ehgxtl"><!></div> <!></div>'),xf=L('<div class="section svelte-ehgxtl"><h4 class="svelte-ehgxtl">Local Constraints</h4> <!></div>'),$f=L('<div class="empty-state svelte-ehgxtl"><p class="svelte-ehgxtl">No rules added yet</p> <p class="hint svelte-ehgxtl">Click "+ Add Rule" to get started</p></div>'),kf=L('<div class="sidebar svelte-ehgxtl"><div class="sidebar-header svelte-ehgxtl"><h3 class="svelte-ehgxtl">Active Rules</h3> <button class="add-btn svelte-ehgxtl">+ Add Rule</button></div> <div class="sidebar-content svelte-ehgxtl"><!> <!> <!></div></div>');function Cf(t,e){wt(e,!1);let n=at(e,"globalRules",24,()=>[]),s=at(e,"constraintInstances",24,()=>[]),l=at(e,"selectedInstance",12,null),i=at(e,"selectedGroup",12,null);const o=on();function a(m,O){l(m),i(O),o("selectGroup",{instance:m,group:O})}function u(m){o("addGroup",{instance:m})}function c(m){o("deleteInstance",{instance:m})}function f(m,O){o("deleteGroup",{instance:m,group:O})}function d(m){o("deleteGlobalRule",{ruleId:m})}Dt();var v=kf(),b=w(v),_=x(w(b),2),$=x(b,2),j=w($);{var E=m=>{var O=vf(),V=x(w(O),2);Ke(V,1,n,Je,(U,R)=>{var q=df(),I=w(q),Y=w(I),F=x(I,2);Q(()=>J(Y,(r(R),A(()=>r(R).name)))),ee("click",F,()=>d(r(R).id)),M(U,q)}),M(m,O)};W(j,m=>{ue(n()),A(()=>n().length>0)&&m(E)})}var C=x(j,2);{var k=m=>{var O=xf(),V=x(w(O),2);Ke(V,1,s,Je,(U,R)=>{var q=Sf();let I;var Y=w(q),F=w(Y),g=w(F),X=x(F,2),K=x(Y,2),be=w(K);{var qe=de=>{const ve=ot(()=>(r(R),A(()=>r(R).rule.minGroups||1))),Le=ot(()=>(r(R),A(()=>r(R).rule.maxGroups))),$t=ot(()=>(ue(r(Le)),r(R),A(()=>!r(Le)||r(R).groups.length<r(Le))));var nt=mf(),kt=pe(nt);Ke(kt,1,()=>(r(R),A(()=>r(R).groups)),Je,(ye,ie,ft)=>{var Pe=pf();let Ct;var un=w(Pe);un.nodeValue=`Group ${ft+1} `;var cn=x(un);{var Mn=Me=>{var st=hf(),fn=w(st);Q(()=>J(fn,`(${r(ie),A(()=>r(ie).value)??""})`)),M(Me,st)};W(cn,Me=>{r(R),r(ie),A(()=>r(R).rule.requiresValue&&r(ie).value!==void 0)&&Me(Mn)})}var zn=x(cn,2);{var An=Me=>{var st=_f();ee("click",st,Pr(()=>f(r(R),r(ie)))),M(Me,st)};W(zn,Me=>{r(R),ue(r(ve)),A(()=>r(R).groups.length>r(ve))&&Me(An)})}Q(Me=>Ct=ce(Pe,1,"group-tab svelte-ehgxtl",null,Ct,Me),[()=>({active:l()===r(R)&&i()===r(ie)})]),ee("click",Pe,()=>a(r(R),r(ie))),M(ye,Pe)});var Wt=x(kt,2);{var Ft=ye=>{var ie=gf();ee("click",ie,()=>u(r(R))),M(ye,ie)};W(Wt,ye=>{r($t)&&ye(Ft)})}M(de,nt)};W(be,de=>{de(qe)})}var fe=x(K,2);{var tt=de=>{var ve=wf(),Le=w(ve),$t=w(Le),nt=x($t);{var kt=ye=>{var ie=bf(),ft=w(ie);Q(Pe=>J(ft,`(${Pe??""})`),[()=>(ue(i()),A(()=>i().cells.map(([Pe,Ct])=>`${Pe+1},${Ct+1}`).join(" ")))]),M(ye,ie)};W(nt,ye=>{ue(i()),A(()=>i().cells.length>0)&&ye(kt)})}var Wt=x(Le,2);{var Ft=ye=>{var ie=yf();Q(()=>gn(ie,"placeholder",(r(R),A(()=>r(R).rule.valueLabel||"Value")))),Sn(ie,()=>i().value,ft=>i(i().value=ft,!0)),ee("change",ie,()=>o("updateGroup",{instance:r(R),group:i()})),M(ye,ie)};W(Wt,ye=>{r(R),A(()=>r(R).rule.requiresValue)&&ye(Ft)})}Q(()=>J($t,`${ue(i()),A(()=>i().cells.length)??""} cell${ue(i()),A(()=>i().cells.length!==1?"s":"")??""} `)),M(de,ve)};W(fe,de=>{l()===r(R)&&i()&&de(tt)})}Q(de=>{I=ce(q,1,"instance-card svelte-ehgxtl",null,I,de),J(g,`${r(R),A(()=>r(R).rule.name)??""} #${r(R),A(()=>r(R).id)??""}`)},[()=>({selected:l()===r(R)})]),ee("click",X,()=>c(r(R))),M(U,q)}),M(m,O)};W(C,m=>{ue(s()),A(()=>s().length>0)&&m(k)})}var P=x(C,2);{var z=m=>{var O=$f();M(m,O)};W(P,m=>{ue(n()),ue(s()),A(()=>n().length===0&&s().length===0)&&m(z)})}ee("click",_,()=>o("openRuleSelector")),M(t,v),St()}function Qe(t,e,n){const s=e*n,l=(e+1)*n,i=s+n/2,o=t*n,a=(t+1)*n,u=o+n/2;return{x_min:s,x:i,x_max:l,y_min:o,y:u,y_max:a}}function Rf(t,e,n,s,l,i){const o=Qe(e[0],e[1],i),a=Qe(n[0],n[1],i);t.strokeStyle=l,t.lineWidth=s,t.lineCap="round",t.beginPath(),t.moveTo(o.x,o.y),t.lineTo(a.x,a.y),t.stroke()}function Ef(t,e,n,s={}){const{color:l="#666",lineWidth:i=2,dash:o=[5,3]}=s;t.strokeStyle=l,t.lineWidth=i,t.setLineDash(o),e.forEach(([a,u])=>{const c=Qe(a,u,n),f=!e.some(([_,$])=>_===a-1&&$===u),d=!e.some(([_,$])=>_===a+1&&$===u),v=!e.some(([_,$])=>_===a&&$===u-1),b=!e.some(([_,$])=>_===a&&$===u+1);f&&(t.beginPath(),t.moveTo(c.x_min,c.y_min),t.lineTo(c.x_max,c.y_min),t.stroke()),d&&(t.beginPath(),t.moveTo(c.x_min,c.y_max),t.lineTo(c.x_max,c.y_max),t.stroke()),v&&(t.beginPath(),t.moveTo(c.x_min,c.y_min),t.lineTo(c.x_min,c.y_max),t.stroke()),b&&(t.beginPath(),t.moveTo(c.x_max,c.y_min),t.lineTo(c.x_max,c.y_max),t.stroke())}),t.setLineDash([])}function Tf(t,e,n,s={}){const{fillColor:l="#999",outlineColor:i="#fff"}=s;if(e.length===0)return;const o=n*.9,a=n*.85;t.strokeStyle=l,t.lineWidth=o,t.lineCap="round",t.lineJoin="round",t.beginPath(),e.forEach(([u,c],f)=>{const d=Qe(u,c,n);f===0?t.moveTo(d.x,d.y):t.lineTo(d.x,d.y)}),t.stroke(),t.strokeStyle=i,t.lineWidth=a,t.beginPath(),e.forEach(([u,c],f)=>{const d=Qe(u,c,n);f===0?t.moveTo(d.x,d.y):t.lineTo(d.x,d.y)}),t.stroke()}function Of(t,e,n,s,l={}){const{color:i="#000",lineWidth:o=1}=l,[a,u]=e,[c,f]=n,d=Qe(a,u,s);t.strokeStyle=i,t.lineWidth=o,t.setLineDash([]),t.beginPath(),u===f?c===a+1?(t.moveTo(d.x_min,d.y_max),t.lineTo(d.x_max,d.y_max)):c===a-1&&(t.moveTo(d.x_min,d.y_min),t.lineTo(d.x_max,d.y_min)):a===c&&(f===u+1?(t.moveTo(d.x_max,d.y_min),t.lineTo(d.x_max,d.y_max)):f===u-1&&(t.moveTo(d.x_min,d.y_min),t.lineTo(d.x_min,d.y_max))),t.stroke()}function Mf(t,e){return{cellSize:t,gridInfo:e,getCellCenter:(n,s)=>{const l=Qe(n,s,t);return{x:l.x,y:l.y}},getCellCorner:(n,s)=>{const l=Qe(n,s,t);return{x:l.x_min,y:l.y_min}},get_coords:(n,s)=>Qe(n,s,t),draw_line:(n,s,l,i,o)=>Rf(n,s,l,i,o,t),draw_cage:(n,s,l)=>Ef(n,s,t,l),draw_pill:(n,s,l)=>Tf(n,s,t,l),redraw_edge:(n,s,l,i)=>Of(n,s,l,t,i)}}var zf=L('<span style="color: #2196F3; font-weight: bold;" class="svelte-1psu94r"> </span> <button class="exit-select-btn svelte-1psu94r">Exit Selection Mode (Esc)</button>',1),Af=L("<button>Numbers</button>"),Gf=L("<button>Shading</button>"),jf=L("<button>Lines (Center)</button>"),qf=L("<button>Lines (Edge)</button>"),Lf=L('<span class="svelte-1psu94r">Edit:</span> <!> <!> <!> <!>',1),Pf=L('<button class="solve-btn svelte-1psu94r">Solve Puzzle</button>'),Vf=L('<button class="cancel-btn svelte-1psu94r">Cancel</button>'),If=L('<li class="svelte-1psu94r"><strong>1-9:</strong> Enter number</li> <li class="svelte-1psu94r"><strong>Shift+1-9:</strong> Pencil mark</li> <li class="svelte-1psu94r"><strong>Backspace/Delete:</strong> Clear cell</li>',1),Nf=L('<li class="svelte-1psu94r"><strong>S/Space:</strong> Cycle shading (unknown → black → green → unknown)</li> <li class="svelte-1psu94r"><strong>Dark gray:</strong> Given shaded</li> <li class="svelte-1psu94r"><strong>Light gray:</strong> Solving shaded</li> <li class="svelte-1psu94r"><strong>Dark green:</strong> Given not-shaded</li> <li class="svelte-1psu94r"><strong>Light green:</strong> Solving not-shaded</li>',1),Df=L('<li class="svelte-1psu94r"><em>In setting mode: can edit/delete everything</em></li>'),Wf=L('<li class="svelte-1psu94r"><em>In solving mode: can only edit blue entries</em></li>'),Ff=L('<div class="solve-status solving svelte-1psu94r"><h4 class="svelte-1psu94r">Solving...</h4> <p class="svelte-1psu94r"> </p></div>'),Uf=L('<p class="svelte-1psu94r">Solution found! Switch to Solving mode to see it.</p>'),Bf=L('<p class="svelte-1psu94r">No solution exists for this puzzle</p>'),Zf=L('<p class="svelte-1psu94r"> </p>'),Hf=L('<p class="svelte-1psu94r"> </p>'),Yf=L('<details open class="svelte-1psu94r"><summary class="svelte-1psu94r">Generated MiniZinc Model</summary> <pre class="minizinc-code svelte-1psu94r"> </pre></details>'),Jf=L('<div><h4 class="svelte-1psu94r"> </h4> <!> <!> <button class="show-code-btn svelte-1psu94r"> </button> <!></div>'),Kf=L('<div class="puzzle-editor svelte-1psu94r"><div class="toolbar svelte-1psu94r"><div class="mode-toggle svelte-1psu94r"><button>Setting Mode</button> <button>Solving Mode</button></div> <div class="edit-mode-toggle svelte-1psu94r"><!></div> <div class="actions svelte-1psu94r"><button>Clear Solving Data</button> <!></div></div> <div class="editor-content svelte-1psu94r"><div class="canvas-container svelte-1psu94r"><canvas class="svelte-1psu94r"></canvas></div> <!> <div class="side-panel svelte-1psu94r"><div class="info-panel svelte-1psu94r"><h3 class="svelte-1psu94r"> </h3> <p class="svelte-1psu94r">Mode: <strong> </strong></p> <p class="svelte-1psu94r">Editing: <strong> </strong></p> <p class="svelte-1psu94r"> </p> <div class="instructions svelte-1psu94r"><h4 class="svelte-1psu94r">Controls:</h4> <ul class="svelte-1psu94r"><!> <li class="svelte-1psu94r"><strong>Arrows:</strong> Navigate</li> <li class="svelte-1psu94r"><strong>Click:</strong> Select cell</li></ul></div> <div class="legend svelte-1psu94r"><h4 class="svelte-1psu94r">Legend:</h4> <ul class="svelte-1psu94r"><li class="svelte-1psu94r"><strong>Black numbers:</strong> Given clues (always visible)</li> <li class="svelte-1psu94r"><strong>Blue numbers:</strong> Your solving work (always visible)</li> <!></ul></div></div> <!></div></div> <div class="bottom-toolbar svelte-1psu94r"><button>Back to Variables</button></div></div> <!>',1);function Qf(t,e){wt(e,!1);let n=at(e,"puzzleConfig",8);const s=on(),l=60,i=1,o=3;let a=te("setting"),u=te("numbers"),c=te(null),f=te(!1),d=te(null),v=te(null),b=te(!1),_=te(""),$=te(!1),j=te([]),E=te([]),C=te(null),k=te(null),P=1;const z=n().grid.rows,m=n().grid.cols,O=n().variables.includes("numbers-all")||n().variables.includes("numbers-some"),V=n().variables.includes("shading"),U=n().variables.includes("lines-center"),R=n().variables.includes("lines-edge");let q=Array(z).fill(null).map(()=>Array(m).fill(null).map(()=>({value:null,pencilMarks:new Set,shaded:null,isClue:!1}))),I=te(Array(z).fill(null).map(()=>Array(m).fill(null).map(()=>({value:null,pencilMarks:new Set,shaded:null})))),Y=Array(z).fill(null).map((p,h)=>Array(m).fill(null).map((y,T)=>{if(n().grid.regions){for(let G=0;G<n().grid.regions.length;G++)if(n().grid.regions[G].some(D=>D[0]===h&&D[1]===T))return G+1}return h*m+T+1})),F=te(),g=te();const X=new Vr;qu(()=>{S(g,r(F).getContext("2d")),N(F,r(F).width=m*l+i),N(F,r(F).height=z*l+i),K()});function K(){if(r(g)){r(g).clearRect(0,0,r(F).width,r(F).height);for(let p=0;p<z;p++)for(let h=0;h<m;h++)be(p,h);tt(),ve();for(let p=0;p<z;p++)for(let h=0;h<m;h++)qe(p,h);r(u)==="select-cells"&&r(k)&&Le(),r(c)&&de(r(c).r,r(c).c)}}function be(p,h){const y=h*l,T=p*l,G=q[p][h],D=r(I)[p][h];N(g,r(g).fillStyle="#fff"),G.shaded===!0?(N(g,r(g).fillStyle="#333"),r(g).fillRect(y,T,l,l)):G.shaded===!1?(N(g,r(g).fillStyle="#c8e6c9"),r(g).fillRect(y,T,l,l)):D.shaded===!0?(N(g,r(g).fillStyle="#888"),r(g).fillRect(y,T,l,l)):D.shaded===!1?(N(g,r(g).fillStyle="#e8f5e9"),r(g).fillRect(y,T,l,l)):(N(g,r(g).fillStyle="#fff"),r(g).fillRect(y,T,l,l))}function qe(p,h){const y=h*l,T=p*l,G=q[p][h],D=r(I)[p][h];G.value!==null&&G.isClue?(N(g,r(g).fillStyle="#000"),N(g,r(g).font="bold 28px Arial"),N(g,r(g).textAlign="center"),N(g,r(g).textBaseline="middle"),r(g).fillText(G.value,y+l/2,T+l/2)):D.value!==null&&(N(g,r(g).fillStyle="#2196F3"),N(g,r(g).font="bold 28px Arial"),N(g,r(g).textAlign="center"),N(g,r(g).textBaseline="middle"),r(g).fillText(D.value,y+l/2,T+l/2));const H=r(a)==="solving"?D.pencilMarks:G.pencilMarks;H.size>0&&fe(y,T,H,r(a)==="solving")}function fe(p,h,y,T){N(g,r(g).fillStyle=T?"#2196F3":"#666"),N(g,r(g).font="12px Arial"),N(g,r(g).textAlign="center"),N(g,r(g).textBaseline="middle");const G=Array.from(y).sort(),D=3,H=4,ne=(l-H*2)/D;G.forEach(ae=>{if(ae>=1&&ae<=9){const dt=ae-1,Rt=Math.floor(dt/D),Ut=dt%D,Et=p+H+Ut*ne+ne/2,Bt=h+H+Rt*ne+ne/2;r(g).fillText(ae.toString(),Et,Bt)}})}function tt(){N(g,r(g).strokeStyle="#999"),N(g,r(g).lineWidth=i);for(let p=0;p<=m;p++){const h=p*l;r(g).beginPath(),r(g).moveTo(h,0),r(g).lineTo(h,z*l),r(g).stroke()}for(let p=0;p<=z;p++){const h=p*l;r(g).beginPath(),r(g).moveTo(0,h),r(g).lineTo(m*l,h),r(g).stroke()}N(g,r(g).strokeStyle="#000"),N(g,r(g).lineWidth=o);for(let p=0;p<z;p++)for(let h=0;h<m;h++){if(h<m-1&&Y[p][h]!==Y[p][h+1]){const y=(h+1)*l,T=p*l;r(g).beginPath(),r(g).moveTo(y,T),r(g).lineTo(y,T+l),r(g).stroke()}if(p<z-1&&Y[p][h]!==Y[p+1][h]){const y=h*l,T=(p+1)*l;r(g).beginPath(),r(g).moveTo(y,T),r(g).lineTo(y+l,T),r(g).stroke()}}r(g).strokeRect(0,0,m*l,z*l)}function de(p,h){const y=h*l,T=p*l;N(g,r(g).strokeStyle="#2196F3"),N(g,r(g).lineWidth=3),r(g).strokeRect(y+2,T+2,l-4,l-4)}function ve(){const h=Mf(l,{rows:z,cols:m,regions:Y});for(const y of r(E))if(y.rule.render&&typeof y.rule.render=="function")try{y.rule.render(y.groups,r(g),h)}catch(T){console.error(`Error rendering constraint ${y.rule.id}:`,T)}}function Le(){if(r(k))for(let p=0;p<r(k).cells.length;p++){const[h,y]=r(k).cells[p],T=y*l,G=h*l;N(g,r(g).fillStyle="rgba(33, 150, 243, 0.2)"),r(g).fillRect(T,G,l,l),N(g,r(g).strokeStyle="#2196F3"),N(g,r(g).lineWidth=2),r(g).strokeRect(T+1,G+1,l-2,l-2),N(g,r(g).fillStyle="#2196F3"),N(g,r(g).font="bold 16px Arial"),N(g,r(g).textAlign="right"),N(g,r(g).textBaseline="top"),r(g).fillText((p+1).toString(),T+l-4,G+4)}}function $t(p){const h=r(F).getBoundingClientRect(),y=p.clientX-h.left,T=p.clientY-h.top,G=Math.floor(y/l),D=Math.floor(T/l);if(D>=0&&D<z&&G>=0&&G<m){if(S(c,{r:D,c:G}),r(u)==="select-cells"&&r(k)){const H=r(k).cells.findIndex(([ne,ae])=>ne===D&&ae===G);H>=0?r(k).cells.splice(H,1):r(k).cells.push([D,G]),N(k,r(k).cells=[...r(k).cells]),S(E,r(E))}K()}else r(u)==="select-cells"&&nt()}function nt(){S(C,null),S(k,null),S(u,O?"numbers":V?"shading":"numbers"),K()}function kt(p){if(p.key==="Escape"&&r(u)==="select-cells"){nt();return}if(!r(c)||r(f))return;const{r:h,c:y}=r(c),T=p.key,G=r(a)==="setting"?q:r(I);if(r(u)==="numbers"&&O)if(T>="1"&&T<="9"){const D=parseInt(T),H=n().variableConfig["numbers-all"]?.max||n().variableConfig["numbers-some"]?.max||9;D<=H&&(p.shiftKey?(G[h][y].pencilMarks.has(D)?G[h][y].pencilMarks.delete(D):G[h][y].pencilMarks.add(D),G[h][y].pencilMarks=new Set(G[h][y].pencilMarks)):(G[h][y].value=D,G[h][y].pencilMarks.clear(),r(a)==="setting"&&(G[h][y].isClue=!0)),K())}else(T==="Backspace"||T==="Delete"||T==="0")&&(r(a)==="setting"?(G[h][y].value=null,G[h][y].pencilMarks.clear(),G[h][y].isClue=!1,K()):(G[h][y].value=null,G[h][y].pencilMarks.clear(),K()));else r(u)==="shading"&&V&&(T==="s"||T==="S"||T===" ")&&(G[h][y].shaded===null?G[h][y].shaded=!0:G[h][y].shaded===!0?G[h][y].shaded=!1:G[h][y].shaded=null,K());T==="ArrowUp"&&h>0&&(p.preventDefault(),S(c,{r:h-1,c:y}),K()),T==="ArrowDown"&&h<z-1&&(p.preventDefault(),S(c,{r:h+1,c:y}),K()),T==="ArrowLeft"&&y>0&&(p.preventDefault(),S(c,{r:h,c:y-1}),K()),T==="ArrowRight"&&y<m-1&&(p.preventDefault(),S(c,{r:h,c:y+1}),K())}function Wt(){S(I,Array(z).fill(null).map(()=>Array(m).fill(null).map(()=>({value:null,pencilMarks:new Set,shaded:null})))),K()}async function Ft(){S(f,!0),S(d,"Compiling puzzle..."),S(v,null);try{X.configure(n().grid,n().variables,n().variableConfig),S(d,"Adding clues...");for(let h=0;h<z;h++)for(let y=0;y<m;y++){const T=q[h][y];T.value!==null&&O&&X.addClue(h,y,n().variables.find(G=>G.startsWith("numbers")),T.value),T.shaded===!0&&V?X.addClue(h,y,"shading",!0):T.shaded===!1&&V&&X.addClue(h,y,"shading",!1)}S(d,"Adding rules...");for(const h of r(j))X.addGlobalRule(h);S(d,"Adding constraint instances...");for(const h of r(E))X.addConstraintInstance(h.rule,h.groups);S(d,"Solving...");const p=await X.solve({numSolutions:1});S(v,p),S(_,p.modelCode||X.getCompiledModel()),S(f,!1),S(d,null),(p.status==="SATISFIED"||p.status==="ALL_SOLUTIONS")&&ye(p)}catch(p){console.error("Solve error:",p),S(v,{status:"ERROR",error:p.message}),S(f,!1),S(d,null)}}function ye(p){if(!p.solutions||p.solutions.length===0)return;const h=p.solutions[0];if(console.log("Parsing solution:",h),h.output){const y=typeof h.output=="string"?h.output:h.output.default||"";if(console.log("Solution output:",y),O&&y.includes("numbers:")){const T=y.match(/numbers:\s*([\s\S]*?)(?=\n\n|shading:|$)/);if(T){const D=T[1].trim().split(`
`).map(H=>H.trim().replace(/[|\[\]]/g,"").split(/\s+/).filter(ne=>ne));for(let H=0;H<Math.min(z,D.length);H++)for(let ne=0;ne<Math.min(m,D[H].length);ne++){const ae=parseInt(D[H][ne]);!isNaN(ae)&&ae>0&&N(I,r(I)[H][ne].value=ae)}}}if(V&&y.includes("shading:")){console.log("Parsing shading...");const T=y.match(/shading:\s*([\s\S]*?)$/);if(T){const G=T[1].trim();console.log("Shading grid text:",G);const D=G.split(`
`).map(H=>H.trim().replace(/[|\[\]]/g,"").split(/\s*,\s*|\s+/).filter(ne=>ne));console.log("Parsed shading lines:",D);for(let H=0;H<Math.min(z,D.length);H++)for(let ne=0;ne<Math.min(m,D[H].length);ne++){const ae=D[H][ne].toLowerCase();console.log(`Setting shading[${H}][${ne}] = ${ae}`),ae==="true"?N(I,r(I)[H][ne].shaded=!0):ae==="false"&&N(I,r(I)[H][ne].shaded=!1)}}}S(I,r(I)),K()}}function ie(){S(f,!1),S(d,null)}function ft(p){const h=p.detail,y=rf();S(j,y.filter(T=>h.includes(T.id)))}function Pe(p){const{rule:h}=p.detail,y={id:P++,rule:h,groups:[{cells:[],value:h.requiresValue?null:void 0}]};S(E,[...r(E),y]),S(C,y),S(k,y.groups[0]),S(u,"select-cells")}function Ct(p){S(C,p.detail.instance),S(k,p.detail.group),S(u,"select-cells")}function un(p){S(C,p.detail.instance),S(k,p.detail.group),S(u,"select-cells")}function cn(p){const{instance:h}=p.detail,y={cells:[],value:h.rule.requiresValue?null:void 0};h.groups=[...h.groups,y],S(E,r(E)),S(k,y),S(u,"select-cells")}function Mn(p){const{instance:h}=p.detail;S(E,r(E).filter(y=>y!==h)),r(C)===h&&(S(C,null),S(k,null),S(u,O?"numbers":V?"shading":"numbers"))}function zn(p){const{instance:h,group:y}=p.detail;h.groups=h.groups.filter(T=>T!==y),S(E,r(E)),r(k)===y&&(S(k,h.groups[0]||null),r(k)||S(u,O?"numbers":V?"shading":"numbers"))}function An(p){const{ruleId:h}=p.detail;S(j,r(j).filter(y=>y.id!==h))}function Me(p){S(E,r(E))}en(()=>{},()=>{O?S(u,"numbers"):V?S(u,"shading"):U?S(u,"lines-center"):R&&S(u,"lines-edge")}),en(()=>(r(g),r(u),r(C),r(k),r(E),r(I),r(c)),()=>{r(g)&&(r(u),r(C),r(k),r(E),r(I),r(c),K())}),as(),Dt();var st=Kf();ee("keydown",Kn,kt);var fn=pe(st),ds=w(fn),vs=w(ds),dn=w(vs);let hs;var Gn=x(dn,2);let _s;var ps=x(vs,2),Ta=w(ps);{var Oa=p=>{var h=zf(),y=pe(h),T=w(y),G=x(y,2);Q(()=>{J(T,`Selecting cells for: ${r(C),A(()=>r(C)?.rule.name||"constraint")??""}`),G.disabled=r(f)}),ee("click",G,nt),M(p,h)},Ma=p=>{var h=je(),y=pe(h);{var T=G=>{var D=Lf(),H=x(pe(D),2);{var ne=oe=>{var le=Af();let ke;Q(Fe=>{le.disabled=r(f),ke=ce(le,1,"svelte-1psu94r",null,ke,Fe)},[()=>({active:r(u)==="numbers"})]),ee("click",le,()=>S(u,"numbers")),M(oe,le)};W(H,oe=>{O&&oe(ne)})}var ae=x(H,2);{var dt=oe=>{var le=Gf();let ke;Q(Fe=>{le.disabled=r(f),ke=ce(le,1,"svelte-1psu94r",null,ke,Fe)},[()=>({active:r(u)==="shading"})]),ee("click",le,()=>S(u,"shading")),M(oe,le)};W(ae,oe=>{V&&oe(dt)})}var Rt=x(ae,2);{var Ut=oe=>{var le=jf();let ke;Q(Fe=>{le.disabled=r(f),ke=ce(le,1,"svelte-1psu94r",null,ke,Fe)},[()=>({active:r(u)==="lines-center"})]),ee("click",le,()=>S(u,"lines-center")),M(oe,le)};W(Rt,oe=>{U&&oe(Ut)})}var Et=x(Rt,2);{var Bt=oe=>{var le=qf();let ke;Q(Fe=>{le.disabled=r(f),ke=ce(le,1,"svelte-1psu94r",null,ke,Fe)},[()=>({active:r(u)==="lines-edge"})]),ee("click",le,()=>S(u,"lines-edge")),M(oe,le)};W(Et,oe=>{R&&oe(Bt)})}M(G,D)};W(y,G=>{ue(n()),A(()=>n().variables.length>1)&&G(T)},!0)}M(p,h)};W(Ta,p=>{r(u)==="select-cells"?p(Oa):p(Ma,!1)})}var za=x(ps,2),jn=w(za),Aa=x(jn,2);{var Ga=p=>{var h=Pf();ee("click",h,Ft),M(p,h)},ja=p=>{var h=Vf();ee("click",h,ie),M(p,h)};W(Aa,p=>{r(f)?p(ja,!1):p(Ga)})}var gs=x(ds,2),ms=w(gs),bs=w(ms);Au(bs,p=>S(F,p),()=>r(F));var ys=x(ms,2);Cf(ys,{get globalRules(){return r(j)},get constraintInstances(){return r(E)},get selectedInstance(){return r(C)},get selectedGroup(){return r(k)},$$events:{openRuleSelector:()=>S($,!0),selectInstance:Ct,selectGroup:un,addGroup:cn,deleteInstance:Mn,deleteGroup:zn,deleteGlobalRule:An,updateGroup:Me}});var qa=x(ys,2),ws=w(qa),Ss=w(ws),La=w(Ss),xs=x(Ss,2),$s=x(w(xs));let ks;var Pa=w($s),Cs=x(xs,2),Va=x(w(Cs)),Ia=w(Va),Rs=x(Cs,2),Na=w(Rs),Es=x(Rs,2),Da=x(w(Es),2),Wa=w(Da);{var Fa=p=>{var h=If();M(p,h)},Ua=p=>{var h=je(),y=pe(h);{var T=G=>{var D=Nf();M(G,D)};W(y,G=>{r(u)==="shading"&&G(T)},!0)}M(p,h)};W(Wa,p=>{r(u)==="numbers"?p(Fa):p(Ua,!1)})}var Ba=x(Es,2),Za=x(w(Ba),2),Ha=x(w(Za),4);{var Ya=p=>{var h=Df();M(p,h)},Ja=p=>{var h=Wf();M(p,h)};W(Ha,p=>{r(a)==="setting"?p(Ya):p(Ja,!1)})}var Ka=x(ws,2);{var Qa=p=>{var h=Ff(),y=x(w(h),2),T=w(y);Q(()=>J(T,r(d))),M(p,h)},Xa=p=>{var h=je(),y=pe(h);{var T=G=>{var D=Jf();let H;var ne=w(D),ae=w(ne),dt=x(ne,2);{var Rt=he=>{var Ve=Uf();M(he,Ve)},Ut=he=>{var Ve=je(),Zt=pe(Ve);{var Ht=Tt=>{var vn=Bf();M(Tt,vn)},ro=Tt=>{var vn=je(),lo=pe(vn);{var io=qn=>{var Ts=Zf(),ao=w(Ts);Q(()=>J(ao,`Error: ${r(v),A(()=>r(v).error)??""}`)),M(qn,Ts)};W(lo,qn=>{r(v),A(()=>r(v).status==="ERROR")&&qn(io)},!0)}M(Tt,vn)};W(Zt,Tt=>{r(v),A(()=>r(v).status==="UNSATISFIABLE")?Tt(Ht):Tt(ro,!1)},!0)}M(he,Ve)};W(dt,he=>{r(v),A(()=>r(v).status==="SATISFIED"||r(v).status==="ALL_SOLUTIONS")?he(Rt):he(Ut,!1)})}var Et=x(dt,2);{var Bt=he=>{var Ve=Hf(),Zt=w(Ve);Q(Ht=>J(Zt,`Time: ${Ht??""}s`),[()=>(r(v),A(()=>r(v).time.toFixed(2)))]),M(he,Ve)};W(Et,he=>{r(v),A(()=>r(v).time)&&he(Bt)})}var oe=x(Et,2),le=w(oe),ke=x(oe,2);{var Fe=he=>{var Ve=Yf(),Zt=x(w(Ve),2),Ht=w(Zt);Q(()=>J(Ht,r(_))),M(he,Ve)};W(ke,he=>{r(b)&&r(_)&&he(Fe)})}Q(he=>{H=ce(D,1,"solve-status svelte-1psu94r",null,H,he),J(ae,`Result: ${r(v),A(()=>r(v).status)??""}`),J(le,`${r(b)?"Hide":"Show"} MiniZinc Code`)},[()=>({success:r(v).status==="SATISFIED"||r(v).status==="ALL_SOLUTIONS",error:r(v).status==="ERROR"||r(v).status==="UNSATISFIABLE"})]),ee("click",oe,()=>S(b,!r(b))),M(G,D)};W(y,G=>{r(v)&&G(T)},!0)}M(p,h)};W(Ka,p=>{r(f)?p(Qa):p(Xa,!1)})}var eo=x(gs,2),to=w(eo),no=x(fn,2);{var so=p=>{{let h=ot(()=>(r(j),A(()=>r(j).map(y=>y.id))));ff(p,{get variables(){return ue(n()),A(()=>n().variables)},get initialGlobalRules(){return r(h)},$$events:{updateGlobalRules:ft,addInstance:Pe,close:()=>S($,!1)}})}};W(no,p=>{r($)&&p(so)})}Q((p,h,y,T)=>{dn.disabled=r(f),hs=ce(dn,1,"svelte-1psu94r",null,hs,p),Gn.disabled=r(f),_s=ce(Gn,1,"svelte-1psu94r",null,_s,h),jn.disabled=r(f),J(La,`Grid: ${z??""} × ${m??""}`),ks=ce($s,1,"svelte-1psu94r",null,ks,y),J(Pa,r(a)),J(Ia,r(u)),J(Na,`Variables: ${T??""}`)},[()=>({active:r(a)==="setting"}),()=>({active:r(a)==="solving"}),()=>({"solving-text":r(a)==="solving"}),()=>(ue(n()),A(()=>n().variables.join(", ")))]),ee("click",dn,()=>{S(a,"setting"),K()}),ee("click",Gn,()=>{S(a,"solving"),K()}),ee("click",jn,Wt),ee("click",bs,$t),ee("click",to,()=>s("back")),M(t,st),St()}var Xf=L('<!> <button class="svelte-1n46o8q">Continue to Grid Selection</button>',1),ed=L('<main class="svelte-1n46o8q"><h1 class="svelte-1n46o8q">SMT Puzzle Setter</h1> <div class="progress-indicator svelte-1n46o8q"><div>Test</div> <div>Grid</div> <div>Variables</div> <div>Editor</div></div> <div class="container svelte-1n46o8q"><!></div></main>');function td(t){let e=te("test"),n=te({grid:null,variables:[],variableConfig:{},rules:[],clues:[]});function s(P){N(n,r(n).grid=P.detail.config),P.detail.config.defaultRules?N(n,r(n).rules=P.detail.config.defaultRules):N(n,r(n).rules=[]),S(e,"variables")}function l(P){N(n,r(n).variables=P.detail.variables),N(n,r(n).variableConfig=P.detail.variableConfig);const z=r(n).variables.some(O=>O.startsWith("numbers")),m=r(n).variables.includes("shading");z&&m&&!r(n).rules.includes("even-shaded")&&N(n,r(n).rules=[...r(n).rules,"even-shaded"]),S(e,"editor")}function i(){r(e)==="variables"?S(e,"grid"):r(e)==="editor"&&S(e,"variables")}var o=ed(),a=x(w(o),2),u=w(a);let c;var f=x(u,2);let d;var v=x(f,2);let b;var _=x(v,2);let $;var j=x(a,2),E=w(j);{var C=P=>{var z=Xf(),m=pe(z);Yu(m,{});var O=x(m,2);ee("click",O,()=>S(e,"grid")),M(P,z)},k=P=>{var z=je(),m=pe(z);{var O=U=>{nc(U,{$$events:{gridSelected:s}})},V=U=>{var R=je(),q=pe(R);{var I=F=>{uc(F,{get gridConfig(){return r(n).grid},$$events:{configured:l,back:i}})},Y=F=>{var g=je(),X=pe(g);{var K=be=>{Qf(be,{get puzzleConfig(){return r(n)},$$events:{back:i}})};W(X,be=>{r(e)==="editor"&&be(K)},!0)}M(F,g)};W(q,F=>{r(e)==="variables"?F(I):F(Y,!1)},!0)}M(U,R)};W(m,U=>{r(e)==="grid"?U(O):U(V,!1)},!0)}M(P,z)};W(E,P=>{r(e)==="test"?P(C):P(k,!1)})}Q((P,z,m,O)=>{c=ce(u,1,"step svelte-1n46o8q",null,c,P),d=ce(f,1,"step svelte-1n46o8q",null,d,z),b=ce(v,1,"step svelte-1n46o8q",null,b,m),$=ce(_,1,"step svelte-1n46o8q",null,$,O)},[()=>({active:r(e)==="test"}),()=>({active:r(e)==="grid",completed:r(n).grid}),()=>({active:r(e)==="variables",completed:r(n).variables.length>0}),()=>({active:r(e)==="editor"})]),M(t,o)}Su(td,{target:document.getElementById("app")});
